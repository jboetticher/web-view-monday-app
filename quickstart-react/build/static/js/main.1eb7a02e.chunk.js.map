{"version":3,"sources":["nodes/PrettyItemNode.js","nodes/NodeFunctions.js","components/UIOverlay.js","nodes/CustomConnectionLine.js","ReactFlowChart.js","App.js","serviceWorker.js","index.js"],"names":["memo","data","useState","collapsed","setCollapsed","chevronDownStyle","bottom","top","chevronUpStyle","collapseButtonChip","Avatar","className","style","left","onClick","notCollapsedData","maxWidth","width","group","columnValues","map","x","i","key","fakeTopHandle","background","height","fakeLeftHandle","fakeRightHandle","right","fakeBotHandle","position","groupColor","borderRadius","Chip","size","label","outgoingNodes","length","type","id","opacity","title","textAlign","statusData","padding","marginTop","NodeFunctions","mondaySdk","this","monday","QueryConnections","QueryPositions","event","classList","Object","entries","storage","instance","getItem","then","res","console","log","value","connections","JSON","parse","onConnectParams","replaceIndex","source","target","sourceHandle","push","jsonString","stringify","setItem","sourceId","targetId","sourceHandleId","removed","splice","positions","onNodeDragStopParams","itemId","api","variables","parseInt","UIOverlay","props","zIndex","visibility","children","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition","edgePath","connectionLineType","connectionLineStyle","getBezierPath","fill","stroke","strokeWidth","d","cx","cy","r","ReactFlowChart","statusColors","updateIncomingNodesData","currElements","forEach","element","getOutgoers","setUpNewEdge","targetHandle","newEdgeId","pathSettings","animated","labelStyle","labelBgBorderRadius","labelBgStyle","edgeGripSetting","boardElements","nodeTypes","prettyNode","PrettyItemNode","boardData","bdata","filteredItems","columnData","board","bIndex","indexOf","previousNodeId","previousGroupName","groupIds","groupIndex","currentGroupId","item","itIndex","groupName","titleName","nodeBackgroundColor","filteredData","colorString","num","numIndex","nodeColorOnFilter","itemColumnValues","boardColumnData","statusSettings","column","cIndex","statusInfoJson","labelData","localID","name","status","color","statusColor","isConnecting","boxShadow","y","savedConnections","nodeHelper","GetConnections","undefined","onlyNodes","connection","newEdge","loadConnections","savedPositions","GetPositions","posData","loadPositions","elements","setElements","useEffect","backgroundSettings","variant","gap","initialEdgeContextMenuState","currEdge","mouseX","mouseY","initialNodeContextMenuState","currNode","React","edgeContextMenuState","setEdgeContextMenuState","nodeContextMenuState","setNodeContextMenuState","defaultClose","onContextMenu","preventDefault","clientX","clientY","parentNode","firstChild","onElementClick","onConnect","params","els","addEdge","AddConnection","onConnectStart","nodeId","handleType","elsItem","onConnectStop","onNodeDragStop","node","AddPosition","onNodeContextMenu","connectionLineComponent","CustomConnectionLine","Menu","keepMounted","open","onClose","anchorReference","anchorPosition","MenuItem","currEdgeId","RemoveConnection","removeElements","execute","message","confirmButton","cancelButton","excludeCancelButton","DeleteItem","App","state","settings","listen","setState","context","boardIds","alert","display","fontFamily","boards","EventHasClass","kind","pathdisplay","edgeGrips","backgroundType","marginRight","Component","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error"],"mappings":"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","file":"static/js/main.1eb7a02e.chunk.js","sourcesContent":["import React, { memo, useState } from 'react';\r\nimport { Handle } from 'react-flow-renderer';\r\nimport ChevronDown from \"monday-ui-react-core/dist/icons/DropdownChevronDown\";\r\nimport ChevronUp from \"monday-ui-react-core/dist/icons/DropdownChevronUp\";\r\nimport Chip from '@material-ui/core/Chip';\r\nimport Avatar from '@material-ui/core/Avatar';\r\n\r\n// todo: make color of node change based on whether or not it's finished\r\n// todo: make the color of the dependent nodes change based on whether or not it's finished\r\n\r\n\r\nexport default memo(({ data }) => {\r\n\r\n    // collapsed vs not collapsed\r\n    let [collapsed, setCollapsed] = useState(true);\r\n    var chevronDownStyle = collapsed ? { bottom: '-2px' } : { top: '-2px' };\r\n    var chevronUpStyle = collapsed ? { top: '-2px' } : { bottom: '-2px' };\r\n    var collapseButtonChip =\r\n        <Avatar className={\"small-avatar pos-absolute collapse-chip ignore-node-on-click\"}\r\n            style={{ left: \"-10px\", top: \"-10px\" }}\r\n            onClick={() => {\r\n                setCollapsed(!collapsed);\r\n            }}\r\n        >\r\n            <ChevronUp className={\"pos-absolute noClick\"} style={chevronUpStyle} />\r\n            <ChevronDown className={\"pos-absolute noClick\"} style={chevronDownStyle} />\r\n        </Avatar>;\r\n\r\n    // generates the divs for when it's collapsed and when it's not\r\n    var notCollapsedData = collapsed ? <div /> :\r\n        <div style={{ maxWidth: \"300px\" }}>\r\n            <table>\r\n                <tbody>\r\n                    <tr>\r\n                        <td>Group</td>\r\n                        <td style={{ width: \"16px\" }} />\r\n                        <td className={\"centered-td\"}>{data?.group}</td>\r\n                    </tr>\r\n                    {data?.columnValues.map((x, i) => {\r\n                        switch (x['title']) {\r\n                            case \"Subitems\":\r\n                            case \"Person\":\r\n                            case \"Status\":\r\n                                return <tr key={i}></tr>;\r\n                            default:\r\n                                return (\r\n                                    <tr key={i}>\r\n                                        <td>{x['title']}</td>\r\n                                        <td style={{ width: \"16px\" }} />\r\n                                        <td className={\"centered-td\"}>\r\n                                            {x['text'] === \"\" || x['text'] === null ? \"- - -\" : x['text']}\r\n                                        </td>\r\n                                    </tr>\r\n                                );\r\n                        }\r\n                    })}\r\n                </tbody>\r\n            </table>\r\n\r\n        </div>;\r\n\r\n    //css styles for the handles (these are large and opacity 0)\r\n    //determines the \"hitbox\" for the handles\r\n    //currently the path connects into these hitboxes so it looks strange if it sticks out more than the fake dot            \r\n    var targetStyle = { background: '#0071d9', width: '30%', height: '20px', borderRadius: '0%', top: '-5px', opacity: '0%' };\r\n    var sourceStyleLeft = { background: 'var(--color-mud_black)', width: '20px', height: '30%', borderRadius: '0%', left: '-5px', opacity: '0%' };\r\n    var sourceStyleRight = { background: 'var(--color-mud_black)', width: '20px', height: '30%', borderRadius: '0%', right: '-5px', opacity: '0%' };\r\n    var sourceStyleBot = { background: 'var(--color-mud_black)', width: '30%', height: '20px', borderRadius: '0%', bottom: '-5px', opacity: '0%' };\r\n\r\n    //these are the little handle dots (purely visual)\r\n    var fakeTopHandle = <div className='react-flow__handle-top react-flow__handle' style={{ background: '#0071d9', width: '10px', height: '10px', top: '-5px' }}></div>;\r\n    var fakeLeftHandle = <div className='react-flow__handle-left react-flow__handle' style={{ background: 'var(--color-mud_black)', width: '10px', height: '10px', left: '-5px' }}></div>;\r\n    var fakeRightHandle = <div className='react-flow__handle-right react-flow__handle' style={{ background: 'var(--color-mud_black)', width: '10px', height: '10px', right: '-5px' }}></div>;\r\n    var fakeBotHandle = <div className='react-flow__handle-bottom react-flow__handle' style={{ background: 'var(--color-mud_black)', width: '10px', height: '10px', bottom: '-5px' }}></div>;\r\n\r\n    // change what the handles look like if it is in connecting mode\r\n    // doesnt work so don't give up \r\n    /*if (data?.isConnecting) {\r\n        targetStyle = { background: '#0071d9', width: '20px', height: '20px' };\r\n    }\r\n    else {\r\n        targetStyle = { background: '#0071d9', width: '10px', height: '10px' };\r\n    }*/\r\n\r\n    return (\r\n        <>\r\n            <div style={{\r\n                position: \"fixed\",\r\n                background: data?.groupColor,\r\n                height: \"16px\",\r\n                borderRadius: \"8px\",\r\n                top: \"0px\", left: \"0px\", right: \"0px\",\r\n            }}>\r\n                <div style={{\r\n                    position: \"absolute\",\r\n                    background: data?.groupColor,\r\n                    height: \"8px\",\r\n                    bottom: \"0px\", left: \"0px\", right: \"0px\"\r\n                }} />\r\n                {collapseButtonChip}\r\n                <Chip \r\n                    size={\"medium\"}\r\n                    label={data?.outgoingNodes.length}\r\n                    style={{\r\n                        position: \"absolute\",\r\n                        right: \"-8px\", top: \"-8px\",\r\n                        background: data?.groupColor\r\n                    }}\r\n                />\r\n            </div>\r\n\r\n            <Handle\r\n                type=\"target\"\r\n                position=\"top\"\r\n                id=\"t\"\r\n                style={targetStyle}\r\n            />\r\n            <Handle\r\n                type=\"source\"\r\n                position=\"bottom\"\r\n                id=\"b\"\r\n                style={sourceStyleBot}\r\n            />\r\n            <Handle\r\n                type=\"source\"\r\n                position=\"right\"\r\n                id=\"r\"\r\n                style={sourceStyleRight}\r\n            />\r\n            <Handle\r\n                type=\"source\"\r\n                position=\"left\"\r\n                id=\"l\"\r\n                style={sourceStyleLeft}\r\n            />\r\n            {fakeTopHandle}\r\n            {fakeLeftHandle}\r\n            {fakeRightHandle}\r\n            {fakeBotHandle}\r\n\r\n            <div style={{ maxWidth: \"170px\" }}>\r\n                <h4>{data?.title}</h4>\r\n            </div>\r\n            {notCollapsedData}\r\n            <div style={{\r\n                textAlign: \"center\",\r\n                background: data?.statusData['color'],\r\n                borderRadius: \"4px\",\r\n                padding: \"4px\",\r\n                marginTop: \"8px\"\r\n            }}>\r\n                {data?.statusData['status'] === \"\" ? \"Empty\" : data.statusData['status']}\r\n            </div>\r\n\r\n        </>\r\n    );\r\n});","import React, { memo } from 'react';\r\nimport { Handle } from 'react-flow-renderer';\r\nimport mondaySdk from \"monday-sdk-js\";\r\n\r\nclass NodeFunctions {\r\n\r\n    constructor(mondaySdk) {\r\n        this.monday = mondaySdk;\r\n\r\n        // Querying from monday.com\r\n        this.QueryConnections();\r\n        this.QueryPositions();\r\n    }\r\n\r\n    EventHasClass(event, className) {\r\n        if (event[\"path\"] == null) { return false; }\r\n        var classList = Object.entries(event[\"path\"][0]['classList']);\r\n        for (var i = 0; i < classList.length; i++) {\r\n            if (classList[i][1] === className) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    //#region Connections\r\n\r\n    /* Queries the connection data from monday.com.\r\n     */\r\n    QueryConnections() {\r\n        this.monday.storage.instance.getItem('connection_objects').then(res => {\r\n            console.log(res);\r\n\r\n            if (res.data.value !== null) {\r\n                this.connections = JSON.parse(res.data.value);\r\n                console.log(this.connections);\r\n            }\r\n            else {\r\n                this.connections = [];\r\n                console.log(this.connections);\r\n            }\r\n        });\r\n    }\r\n\r\n    /* Returns the connection data from monday.com in a object format.\r\n     */\r\n    GetConnections() {\r\n        return this.connections;\r\n    }\r\n\r\n    /* \r\n     * Adds and saves connections between two nodes.\r\n     * onConnectParams - the parameters that you get when a connection is made\r\n     */\r\n    AddConnection(onConnectParams) {\r\n\r\n        // if it's null we ain't messing with it\r\n        if (onConnectParams == null) { return; }\r\n        console.log(\"saving connections \", onConnectParams);\r\n\r\n        // checks to see if the current array has any of those connections\r\n        var replaceIndex = -1;\r\n        for (var i = 0; i < this.connections.length; i++) {\r\n            if (this.connections[i].source == onConnectParams.source &&\r\n                this.connections[i].target == onConnectParams.target &&\r\n                this.connections[i].sourceHandle == onConnectParams.sourceHandle) {\r\n                replaceIndex = i;\r\n                break;\r\n            }\r\n        }\r\n\r\n        // add or replace to the current array of connections \r\n        if (replaceIndex < 0) {\r\n            this.connections.push(onConnectParams);\r\n        }\r\n        else {\r\n            this.connections[i] = onConnectParams;\r\n        }\r\n\r\n        // json stringify the current connections\r\n        const jsonString = JSON.stringify(this.connections);\r\n\r\n        // save to monday.com persist\r\n        this.monday.storage.instance.setItem('connection_objects', jsonString).then(res => {\r\n            console.log(res);\r\n            console.log(jsonString);\r\n\r\n            this.QueryConnections();\r\n        });\r\n    }\r\n\r\n    /* Removes a single connection between two nodes from monday.com\r\n     * sourceId - the id of the source node\r\n     * targetId - the id of the target node\r\n     * sourceHandleId - the handle id of the source node\r\n     */\r\n    RemoveConnection(sourceId, targetId, sourceHandleId) {\r\n        // checks to see if the current array has one of those connections\r\n        var replaceIndex = -1;\r\n        for (var i = 0; i < this.connections.length; i++) {\r\n            if (this.connections[i].source == sourceId &&\r\n                this.connections[i].target == targetId && \r\n                this.connections[i].sourceHandle == sourceHandleId) {\r\n                replaceIndex = i;\r\n                //console.log(\"REMOVING FROM DATABASE\", this.connections[i]);\r\n                break;\r\n            }\r\n        }\r\n        \r\n        // if the index isn't negative then it deletes\r\n        if (replaceIndex >= 0) {\r\n            // splices the target that was removed\r\n            //console.log(\"BEFORE REMOVAL:\", this.connections);\r\n            var removed = this.connections.splice(0, i);\r\n            this.connections = removed;\r\n            //console.log(\"AFTER REMOVAL:\", this.connections);\r\n            // json stringify the current connections\r\n            const jsonString = JSON.stringify(this.connections);\r\n\r\n            // save to monday.com persist\r\n            this.monday.storage.instance.setItem('connection_objects', jsonString).then(res => {\r\n                console.log(res);\r\n                console.log(jsonString);\r\n\r\n                this.QueryConnections();\r\n            });\r\n        }\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Positions\r\n\r\n    /* Queries the position data from monday.com.\r\n     */\r\n    QueryPositions() {\r\n        this.monday.storage.instance.getItem('node_positions').then(res => {\r\n            console.log(res);\r\n\r\n            if (res.data.value !== null) {\r\n                this.positions = JSON.parse(res.data.value);\r\n                console.log(this.positions);\r\n            }\r\n            else {\r\n                this.positions = [];\r\n                console.log(this.positions);\r\n            }\r\n        });\r\n    }\r\n\r\n    /* Returns the position data from monday.com in a object format.\r\n     */\r\n    GetPositions() {\r\n        return this.positions;\r\n    }\r\n\r\n    /* \r\n    * Adds and saves connections between two nodes.\r\n    * onConnectParams - the parameters that you get when a connection is made\r\n    */\r\n    AddPosition(onNodeDragStopParams) {\r\n\r\n        // if it's null we ain't messing with it\r\n        if (onNodeDragStopParams == null) { return; }\r\n        console.log(\"saving positions \", onNodeDragStopParams);\r\n\r\n        // checks to see if the current array has any of those positions\r\n        var replaceIndex = -1;\r\n        for (var i = 0; i < this.positions.length; i++) {\r\n            if (this.positions[i].id == onNodeDragStopParams.id) {\r\n                replaceIndex = i;\r\n                break;\r\n            }\r\n        }\r\n\r\n        // add or replace to the current array of positions \r\n        if (replaceIndex < 0) {\r\n            this.positions.push({\r\n                \"id\": onNodeDragStopParams.id,\r\n                \"position\": onNodeDragStopParams.position\r\n            });\r\n        }\r\n        else {\r\n            this.positions[i].position = onNodeDragStopParams.position;\r\n        }\r\n\r\n        // json stringify the current connections\r\n        const jsonString = JSON.stringify(this.positions);\r\n\r\n        // save to monday.com persist\r\n        this.monday.storage.instance.setItem('node_positions', jsonString).then(res => {\r\n            console.log(res);\r\n            console.log(jsonString);\r\n\r\n            this.QueryPositions();\r\n        });\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Database Manipulation\r\n\r\n    DeleteItem(itemId) {\r\n        console.log(typeof(itemId));\r\n        console.log(itemId);\r\n        // delete item query\r\n        this.monday.api(`mutation ($itemId: Int) \r\n        { \r\n            delete_item (item_id: $itemId) { id } \r\n        }`,\r\n            { variables: { itemId: parseInt(itemId) } }\r\n        ).then(res => {\r\n            //this.setState({ boardData: res.data });\r\n        });\r\n\r\n        // finds all of the edges and tries to de\r\n    }\r\n\r\n    //#endregion\r\n}\r\n\r\nexport default NodeFunctions;","import React from 'react';\r\n\r\nlet UIOverlay = props => {\r\n    return (\r\n        <div style={{\r\n            zIndex: \"100\",\r\n            position: \"absolute\",\r\n            top: \"0px\", bottom: \"0px\", right: \"0px\", left: \"0px\",\r\n            visibility: \"hidden\"\r\n        }}>\r\n            <span className=\"ui-overlay-item\">\r\n                {props?.children}\r\n            </span>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport { UIOverlay };\r\nexport default UIOverlay;","import React from 'react';\r\nimport { getBezierPath } from 'react-flow-renderer';\r\n\r\nexport default ({\r\n    sourceX,\r\n    sourceY,\r\n    sourcePosition,\r\n    targetX,\r\n    targetY,\r\n    targetPosition,\r\n    connectionLineType,\r\n    connectionLineStyle,\r\n}) => {\r\n\r\n    const edgePath = getBezierPath({ sourceX, sourceY, sourcePosition, targetX, targetY, targetPosition });\r\n    //straight path\r\n    //d={`M${sourceX},${sourceY} L ${targetX},${targetY}`}\r\n\r\n    return (\r\n        <g>\r\n            <path\r\n                fill=\"none\"\r\n                stroke=\"#fff\"\r\n                strokeWidth={5}\r\n                className=\"animated\"\r\n\r\n                d={edgePath}\r\n\r\n            />\r\n            <circle cx={targetX} cy={targetY} fill=\"#0071d9\" r={5} stroke=\"#fff\" strokeWidth={1.5} />\r\n        </g>\r\n    );\r\n};","import React, { useState, useEffect } from \"react\";\r\nimport ReactFlow, { removeElements, addEdge, Controls, Background, getIncomers, getOutgoers } from 'react-flow-renderer';\r\nimport PrettyItemNode from \"./nodes/PrettyItemNode.js\";\r\nimport CustomConnectionLine from \"./nodes/CustomConnectionLine.js\";\r\n\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\nlet ReactFlowChart = props => {\r\n\r\n\tconst [dab, setDab] = useState(5);\r\n\t// this is an example of an infinite loop. The same thing happens again and again in the same frame\r\n\t// dab exists -> renders -> dab is set -> renders -> dab is set-> ...\r\n\t// setDab(4);\r\n\r\n\t// returns the right color based on the current filter\r\n\tfunction nodeColorOnFilter(filteredData, itemId) {\r\n\r\n\t\tif (filteredData == null) return \"var(--color-snow_white)\";\r\n\r\n\t\tvar colorString = \"var(--color-jarco_gray)\";\r\n\t\tObject.entries(filteredData).forEach(function (num, numIndex) {\r\n\t\t\t//console.log(\"suggestion for \" + itemId + \": \" + num[1]);\r\n\t\t\tif (itemId == num[1]) {\r\n\t\t\t\tcolorString = \"var(--color-snow_white)\";\r\n\t\t\t\t//console.log(\"Holy smokes, you did it! they're equal! now colorstring: \" + colorString);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn colorString;\r\n\t}\r\n\r\n\t// determines the color of a node\r\n\tvar statusColors = null;\r\n\tfunction statusColor(itemColumnValues, boardColumnData) {\r\n\r\n\t\t// retrieves the status colors if not done already\r\n\t\tif (statusColors == null) {\r\n\r\n\t\t\tvar statusSettings = \"pog\";\r\n\t\t\tboardColumnData?.forEach(function (column, cIndex) {\r\n\t\t\t\tif (column['title'] == \"Status\") {\r\n\t\t\t\t\tstatusSettings = column['settings_str'];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tstatusColors = {};\r\n\t\t\tvar statusInfoJson = JSON.parse(statusSettings);\r\n\t\t\tObject.entries(statusInfoJson['labels']).forEach(function (labelData) {\r\n\t\t\t\tvar localID = labelData[0];\r\n\t\t\t\tvar name = labelData[1];\r\n\t\t\t\tstatusColors[name] = statusInfoJson['labels_colors'][localID]['color'];\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// gets the status from the column values\r\n\t\tvar status = \"\";\r\n\t\titemColumnValues?.forEach(function (column, cIndex) {\r\n\t\t\tif (column['title'] === \"Status\") {\r\n\t\t\t\tstatus = column['text'];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// returns the right color css\r\n\t\tif (status in statusColors) return { status: status, color: statusColors[status] };\r\n\t\telse { return { status: \"\", color: \"var(--color-ui_grey)\" }; }\r\n\t}\r\n\r\n\t/* CURRENTLY UNABLE TO WORK DUE TO CONSTRAINTS WITH MONDAY API AND SUBITEMS \r\n\t// pass in the item and the board it is in, alogn with all the boardData\r\n\t// returns an array that holds all the data about the subitems of an item\r\n\tfunction getSubitems(boardData, board, parentItem){\r\n\t  let subitemArray = [];\r\n\r\n\t  let subitemBoard;\r\n\t  boardData.forEach(function(board){\r\n\t\tif (board['name'] == \"Subitems of \" + board['name']){\r\n\t\t  subitemBoard = board;\r\n\t\t}\r\n\t  });\r\n\r\n\t  let parentSubitemText = parentItem['column_values'][0]['text'];\r\n\t  subitemBoard.forEach(function(subitem){\r\n\t    \r\n\t\t//if the parent subitem text contains the name of the subitem,\r\n\t\t//then that subitem in the pool is a subitem of our parent\r\n\t\tif (parentSubitemText.indexOf(subitem['name']) > 0){\r\n\t\t  subitemArray.push(subitem);\r\n\t\t}\r\n\t  });\r\n\r\n\t  return subitemArray;\r\n\t}*/\r\n\r\n\tfunction loadPositions(currElements) {\r\n\t\t//Get the saved data\r\n\t\tlet savedPositions = props?.nodeHelper.GetPositions();\r\n\r\n\t\t//if there was no saved positional data, return\r\n\t\tif (savedPositions == undefined) return currElements;\r\n\t\t\r\n\t\tconsole.log(\"loading saved node positions of\", currElements);\r\n\r\n\t\t//loop through current elements in board\r\n\t\tcurrElements.forEach(function (element) {\r\n\t\t\t// if the element is not a node, skip it\r\n\t\t\tif (element['type'] != \"prettyNode\") return;\r\n\r\n\t\t\t// loop through the saved position data\r\n\t\t\tsavedPositions.forEach(function (posData) {\r\n\r\n\t\t\t\t//if the saved position data id matches the current element id\r\n\t\t\t\t//update the current element's position\r\n\t\t\t\tif (posData['id'] == element['id']) {\r\n\t\t\t\t\telement['position']['x'] = posData['position']['x'];\r\n\t\t\t\t\telement['position']['y'] = posData['position']['y'];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t});\r\n\r\n\t\treturn currElements;\r\n\t}\r\n\r\n\t//returns an array of elements populated with saved connections\r\n\tfunction loadConnections(currElements) {\r\n\t\t//Get the saved data\r\n\t\tlet savedConnections = props?.nodeHelper.GetConnections();\r\n\r\n\t\t//if there was no saved positional data, return\r\n\t\tif (savedConnections == undefined) return currElements;\r\n\r\n\t\tconsole.log(\"loading saved connections of\", currElements);\r\n\r\n\t\t// create an array of only nodes in the board\r\n\t\tlet onlyNodes = [];\r\n\t\tcurrElements.forEach(function(element){\r\n\t\t\t// if the element is not a node, skip it\r\n\t\t\tif(element['type'] == \"prettyNode\"){\r\n\t\t\t\tonlyNodes.push(element);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// add in all the saved connections\r\n\t\tsavedConnections.forEach(function (connection) {\r\n\t\t\tlet newEdge = setUpNewEdge(connection['source'], connection['target'], connection['sourceHandle'], connection['targetHandle']);\r\n\t\t\t\r\n\t\t\t//console.log('edgeloaded:', newEdge);\r\n\t\t\tonlyNodes.push(newEdge);\r\n\t\t\t//currElements.push(newEdge);\r\n\r\n\t\t});\r\n\r\n\t\t//return currElements;\r\n\t\treturn onlyNodes;\r\n\t}\r\n\r\n\t// provides the nodes passed in with data from getIncomers()\r\n\tfunction updateIncomingNodesData(currElements) {\r\n\r\n\t\tconsole.log(\"updating data of\", currElements);\r\n\r\n\t\t// loop through board data\r\n\t\tcurrElements.forEach(function (element) {\r\n\r\n\t\t\t// if the element is not a node, skip it\r\n\t\t\tif (element['type'] != \"prettyNode\") return;\r\n\r\n\t\t\t//element['data']['incomingNodes'] = getIncomers(element, currElements);\r\n\t\t\telement['data']['outgoingNodes'] = getOutgoers(element, currElements);\r\n\r\n\t\t});\r\n\r\n\t\treturn currElements;\r\n\t}\r\n\t\r\n\t// returns a json edge element with the correct styling and data\r\n\tfunction setUpNewEdge(source, target, sourceHandle, targetHandle){\r\n\t\tlet newEdgeId = 'e' + source + '_' + sourceHandle + '-' + target;\r\n\t\tlet newEdge = {\r\n\t\t\tid: newEdgeId,\r\n\t\t\tsource: source,\r\n\t\t\ttarget: target,\r\n\t\t\tsourceHandle: sourceHandle,\r\n\t\t\ttargetHandle: targetHandle,\r\n\t\t\tclassName: newEdgeId,\r\n\r\n\t\t\ttype: props?.pathSettings,\r\n\t\t\tanimated: true,\r\n\r\n\t\t\tstyle: { stroke: '#fff', strokeWidth: '5px' },\r\n\t\t\tlabel: \"jank\",\r\n\t\t\tlabelStyle: { visibility: 'hidden' },\r\n\t\t\tlabelBgBorderRadius: '100%',\r\n\t\t\tlabelBgStyle: {\r\n\t\t\t\theight: '24.3594', fill: 'var(--color-mud_black)', stroke: 'white', strokeWidth: '3',\r\n\t\t\t\tvisibility: (props?.edgeGripSetting ? 'visible' : 'hidden')\r\n\t\t\t},\t\r\n\t\t};\r\n\r\n\t\treturn newEdge;\r\n\t}\r\n\tvar boardElements = [];\r\n\r\n\tconst nodeTypes = {\r\n\t\tprettyNode: PrettyItemNode\r\n\t};\r\n\r\n\t// sets/populates board elements\r\n\tif (props?.boardData != null) {\r\n\t\t// the board data and the items that should be highlighted by the filter\r\n\t\tlet bdata = props?.boardData;\r\n\t\tlet filteredItems = props?.filteredItems;\r\n\r\n\t\tconsole.log(\"DATA FROM PASSED PROPS\", bdata);\r\n\r\n\t\t// retrieves column data FOR JUST THE FIRST BOARD\r\n\t\tvar columnData = bdata[0]['columns'];\r\n\r\n\t\t//Goes into each board element in the JSON data array\r\n\t\t//By the end of it, a complete node board will be populated with nodes and default connections\r\n\t\tbdata.forEach(function (board, bIndex) {\r\n\t\t\tif (board['name'].indexOf(\"Subitems of\") == 1) return;\r\n\t\t\tvar previousNodeId = -1;\r\n\t\t\tvar previousGroupName = \"\";\r\n\r\n\t\t\t// Adds an id number & index to the group ids\r\n\t\t\tlet groupIds = {};\r\n\t\t\tlet groupIndex = {};\r\n\t\t\tlet currentGroupId = 0;\r\n\t\t\tboard['items'].forEach(function (item, itIndex) {\r\n\t\t\t\tlet groupName = item['group']['title'];\r\n\t\t\t\tif (!(groupName in groupIds)) {\r\n\t\t\t\t\tgroupIds[groupName] = currentGroupId;\r\n\t\t\t\t\tgroupIndex[groupName] = 0;\r\n\t\t\t\t\tcurrentGroupId++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t//Goes into each item element in the JSON data\r\n\t\t\tboard['items'].forEach(function (item, itIndex) {\r\n\r\n\t\t\t\tlet groupName = item['group']['title'];\r\n\t\t\t\tlet titleName = item['name'];\r\n\t\t\t\tlet nodeBackgroundColor = nodeColorOnFilter(filteredItems, item['id']);\r\n\r\n\t\t\t\t// gets status data\r\n\t\t\t\tlet statusData = statusColor(item['column_values'], columnData);\r\n\r\n\t\t\t\t// gets subitems if the item has subitems\r\n\t\t\t\t// item['column_values'][0]['text'] provides a text of the subitems\r\n\t\t\t\t// if no subitems, value will be empty string\r\n\t\t\t\tif (item['column_values'][0] != \"\") {\r\n\t\t\t\t\tlet subitems = item['column_values'][0]['text'];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// adds a node\r\n\t\t\t\tboardElements.push(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: item['id'],\r\n\t\t\t\t\t\ttype: \"prettyNode\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\ttitle: titleName,\r\n\t\t\t\t\t\t\tgroup: groupName, groupColor: item['group']['color'],\r\n\t\t\t\t\t\t\tstatusData: statusData,\r\n\t\t\t\t\t\t\tcolumnValues: item['column_values'],\r\n\t\t\t\t\t\t\t//incomingNodes: [],\r\n\t\t\t\t\t\t\tisConnecting: false\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\tpadding: \"16px\",\r\n\t\t\t\t\t\t\tborderRadius: \"8px\", //border: \"4px solid\", borderColor: item['group']['color'],\r\n\t\t\t\t\t\t\tbackground: nodeBackgroundColor, //item['group']['color']\r\n\t\t\t\t\t\t\tboxShadow: \"0px 6px 20px -2px rgba(0, 0, 0, 0.2)\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: { x: 325 * groupIds[groupName] + bIndex * 1000, y: 300 * groupIndex[groupName] }\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// increments group index\r\n\t\t\t\tgroupIndex[groupName] += 1;\r\n\r\n\t\t\t\t// adds an animated connector to the next one if in same group\r\n\t\t\t\tif (previousNodeId > 0 && previousGroupName == groupName) {\r\n\r\n\t\t\t\t\tboardElements.push(setUpNewEdge(previousNodeId, item['id'], 'b', 't'));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpreviousNodeId = item['id'];\r\n\t\t\t\tpreviousGroupName = groupName;\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tconsole.log(\"ELEMENTS BEFORE LOADING SAVED DATA\", boardElements);\r\n\r\n\t\t// updates the positions of all the ndoes from saved data\r\n\t\tboardElements = loadPositions(boardElements);\r\n\r\n\t\t// adds in connections from saved data\r\n\t\tboardElements = loadConnections(boardElements);\r\n\r\n\t\t// passes nodes info on their incoming connections\r\n\t\tboardElements = updateIncomingNodesData(boardElements);\r\n\r\n\t\tconsole.log(\"----BOARD DATA LOADED-----\");\r\n\t\t//console.log(bdata);\r\n\t\tconsole.log(boardElements);\r\n\t\tconsole.log(\"----------\");\r\n\t}\r\n\r\n\t// elements are set to board elements for initial state\r\n\tconst [elements, setElements] = useState(boardElements);\r\n\r\n\t// updates elements when props changes\r\n\tuseEffect(() => {\r\n\t\tsetElements(boardElements);\r\n\t}, [props]);\r\n\r\n\t// background settings\r\n\tvar background = <div></div>;\r\n\tif (props?.backgroundSettings !== \"none\" && props?.backgroundSettings !== null) {\r\n\t\tbackground =\r\n\t\t\t<Background\r\n\t\t\t\tvariant={props?.backgroundSettings}\r\n\t\t\t\tgap={32}\r\n\t\t\t\tsize={2}\r\n\t\t\t/>;\r\n\t}\r\n\r\n\t//#region ReactFlow Callbacks\r\n\r\n\tconst onConnect = (params) => {\r\n\t\tsetElements(function (els) {\r\n\t\t\tif (els !== null) {\r\n\t\t\t\tels = addEdge( setUpNewEdge(params.source, params.target, params.sourceHandle, params.targetHandle), els);\r\n\t\t\t}\r\n\r\n\t\t\t// update internal node data with new incoming connections\r\n\t\t\tels = updateIncomingNodesData(els);\r\n\r\n\t\t\tconsole.log(els);\r\n\t\t\t//console.log('onConnect', params)\r\n\t\t\treturn els;\r\n\t\t});\r\n\r\n\r\n\r\n\t\t// save dat shit\r\n\t\tprops?.nodeHelper.AddConnection(params);\r\n\t};\r\n\r\n\tconst onConnectStart = (event, { nodeId, handleType }) => {\r\n\t\tconsole.log('on connect start', { nodeId, handleType });\r\n\r\n\t\t//loop through all the current elements and replace target handles with bigger versions\r\n\t\tsetElements(function (els) {\r\n\t\t\tels.forEach(function (elsItem) {\r\n\t\t\t\tif (elsItem['type'] != \"prettyNode\") return;\r\n\r\n\t\t\t\telsItem['data']['isConnecting'] = true;\r\n\t\t\t\t//console.log(elsItem['data']['isConnecting']);\r\n\r\n\t\t\t});\r\n\t\t\treturn els;\r\n\t\t});\r\n\t};\r\n\r\n\tconst onConnectStop = (event) => {\r\n\t\t//console.log('on connect stop', event);\r\n\r\n\t\t//loop through all the current elements and replace target handles with bigger versions\r\n\t\tsetElements(function (els) {\r\n\t\t\tels.forEach(function (elsItem) {\r\n\t\t\t\tif (elsItem['type'] != \"prettyNode\") return;\r\n\r\n\t\t\t\telsItem['data']['isConnecting'] = false;\r\n\t\t\t\t//elsItem['data']['groupColor'] = '#579bfc';\r\n\t\t\t\t//elsItem['style']['background'] = '#579bfc';\t\r\n\t\t\t\t//console.log(elsItem);\r\n\r\n\t\t\t});\r\n\t\t\treturn els;\r\n\t\t});\r\n\r\n\t};\r\n\r\n\tconst onNodeDragStop = (event, node) => {\r\n\t\t//console.log(\"onNodeDragStop nodes \", node);\r\n\t\tprops?.nodeHelper.AddPosition(node);\r\n\t}\r\n\r\n\tconst onElementsRemove = (elementsToRemove) => {\r\n\t\t//setElements((els) => removeElements(elementsToRemove, els));\r\n\t}\r\n\r\n\t//#endregion\r\n\r\n\t// context menu handling\r\n\tconst initialEdgeContextMenuState = {\r\n\t\tcurrEdge: null,\r\n\t\tmouseX: null,\r\n\t\tmouseY: null,\r\n\t};\r\n\r\n\tconst initialNodeContextMenuState = {\r\n\t\tcurrNode: null,\r\n\t\tmouseX: null,\r\n\t\tmouseY: null,\r\n\t};\r\n\r\n\tconst [edgeContextMenuState, setEdgeContextMenuState] = React.useState(initialEdgeContextMenuState);\r\n\tconst [nodeContextMenuState, setNodeContextMenuState] = React.useState(initialNodeContextMenuState);\r\n\r\n\t// fired when context menu opened on an edge\r\n\t// called from onContextMenu html tag on the pane\r\n\tconst onEdgeContextMenu = (event) => {\r\n\t\t// prevent default context menu from firing\r\n\t\tevent.preventDefault();\r\n\r\n\t\t//console.log(event.target);\r\n\t\t//console.log(event.target.parentNode.parentNode.firstChild);\r\n\r\n\t\t// if right clicked on an edge, activate edge menu\r\n\t\tif (event.target.className['baseVal'] == \"react-flow__edge-path\") {\r\n\t\t\tsetEdgeContextMenuState({\r\n\t\t\t\t// this currEdge is the path element\r\n\t\t\t\tcurrEdge: event.target,\r\n\t\t\t\tmouseX: event.clientX - 2,\r\n\t\t\t\tmouseY: event.clientY - 4,\r\n\t\t\t});\r\n\t\t}\r\n\t\t// if right clicked on an edge label, activate edge menu\r\n\t\telse if (event.target.className['baseVal'] == \"react-flow__edge-textbg\") {\r\n\t\t\tsetEdgeContextMenuState({\r\n\t\t\t\t// this currEdge is the path element label is on\r\n\t\t\t\tcurrEdge: event.target.parentNode.parentNode.firstChild,\r\n\t\t\t\tmouseX: event.clientX - 2,\r\n\t\t\t\tmouseY: event.clientY - 4,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// fired when context menu opened on a node\r\n\t// callback from ReactFlow\r\n\tconst onNodeContextMenu = (event, node) => {\r\n\t\t// prevent default context menu from firing\r\n\t\tevent.preventDefault();\r\n\r\n\t\t// display context menu on the right-clicked node\r\n\t\tsetNodeContextMenuState({\r\n\t\t\tcurrNode: node,\r\n\t\t\tmouseX: event.clientX - 2,\r\n\t\t\tmouseY: event.clientY - 4,\r\n\t\t});\r\n\t}\r\n\r\n\t// close the context menu when clicked away\r\n\tconst defaultClose = () => {\r\n\t\tconsole.log(\"context menu closed\");\r\n\t\tsetEdgeContextMenuState(initialEdgeContextMenuState);\r\n\t\tsetNodeContextMenuState(initialNodeContextMenuState);\r\n\t};\r\n\r\n\tfunction onNodeDelete() {\r\n\r\n\t\tprops?.monday.execute(\"confirm\", {\r\n\t\t\tmessage: \"Delete this item? \" +\r\n\t\t\t\t\"It will be kept in your Recycle Bin for 30 days.\",\r\n\t\t\tconfirmButton: \"Delete\",\r\n\t\t\tcancelButton: \"Cancel\",\r\n\t\t\texcludeCancelButton: false\r\n\t\t}).then((res) => {\r\n\t\t\tif (res.data[\"confirm\"] === true) {\r\n\t\t\t\t// removes the node\r\n\t\t\t\tsetElements((els) => removeElements([nodeContextMenuState['currNode']], els));\r\n\t\t\t\t//console.log(\"deleted node\", nodeContextMenuState['currNode']);\r\n\r\n\t\t\t\t// close the context menu\r\n\t\t\t\tsetNodeContextMenuState(initialNodeContextMenuState);\r\n\r\n\t\t\t\t//Mutates the monday database.\r\n\t\t\t\tprops?.nodeHelper.DeleteItem(nodeContextMenuState['currNode'].id);\r\n\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction onEdgeDelete() {\r\n\t\t// get the edge id from the class name list of the parent\r\n\t\t// i stored the id in the class name \r\n\t\t// since it's the only place I can store data in the html of a default edge\r\n\t\tlet currEdgeId = edgeContextMenuState['currEdge'].parentNode.classList.item(2);\r\n\r\n\t\t// loop through the elements until you find an id that matches currEdgeId\r\n\t\t// this way you can remove the actual edge that is in elements (we only have the html DOM element)\r\n\t\t// for loop in order to break out as soon as edge is found\r\n\t\tlet i = 0;\r\n\t\t//console.log(\"DELETING FROM\", elements);\r\n\t\tfor (i = 0; i < elements.length; i++) {\r\n\t\t\tif (elements[i]['id'] == currEdgeId) {\r\n\t\t\t\t\r\n\t\t\t\t// if id matches, remove the edge from the database\r\n\t\t\t\tprops?.nodeHelper.RemoveConnection(elements[i]['source'], elements[i]['target'], elements[i]['sourceHandle']);\r\n\r\n\t\t\t\t// if id matches, remove the edge from elements\r\n\t\t\t\tsetElements((els) => removeElements([elements[i]], els));\r\n\t\t\t\t//console.log(\"deleted edge\", elements[i]);\r\n\t\t\t\t\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// close the context menu\r\n\t\tsetEdgeContextMenuState(initialEdgeContextMenuState);\r\n\t}\r\n\r\n\treturn (\r\n\r\n\t\t<ReactFlow\r\n\t\t\tonContextMenu={onEdgeContextMenu}\r\n\t\t\telements={elements}\r\n\t\t\tnodeTypes={nodeTypes}\r\n\t\t\tonElementClick={props?.onElementClick}\r\n\t\t\tonConnect={onConnect}\r\n\t\t\tonConnectStart={onConnectStart}\r\n\t\t\tonConnectStop={onConnectStop}\r\n\t\t\tonNodeDragStop={onNodeDragStop}\r\n\t\t\t//onElementsRemove={onElementsRemove}\r\n\t\t\tonNodeContextMenu={onNodeContextMenu}\r\n\t\t\tconnectionLineComponent={CustomConnectionLine}\r\n\t\t>\r\n\t\t\t<Controls />\r\n\t\t\t{background}\r\n\r\n\t\t\t<Menu\r\n\t\t\t\tkeepMounted\r\n\t\t\t\topen={edgeContextMenuState.mouseY !== null}\r\n\t\t\t\tonClose={defaultClose}\r\n\t\t\t\tanchorReference=\"anchorPosition\"\r\n\t\t\t\tanchorPosition={\r\n\t\t\t\t\tedgeContextMenuState.mouseY !== null && edgeContextMenuState.mouseX !== null\r\n\t\t\t\t\t\t? { top: edgeContextMenuState.mouseY, left: edgeContextMenuState.mouseX }\r\n\t\t\t\t\t\t: undefined\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t<MenuItem onClick={onEdgeDelete}>Delete Connection</MenuItem>\r\n\t\t\t</Menu>\r\n\r\n\t\t\t<Menu\r\n\t\t\t\tkeepMounted\r\n\t\t\t\topen={nodeContextMenuState.mouseY !== null}\r\n\t\t\t\tonClose={defaultClose}\r\n\t\t\t\tanchorReference=\"anchorPosition\"\r\n\t\t\t\tanchorPosition={\r\n\t\t\t\t\tnodeContextMenuState.mouseY !== null && nodeContextMenuState.mouseX !== null\r\n\t\t\t\t\t\t? { top: nodeContextMenuState.mouseY, left: nodeContextMenuState.mouseX }\r\n\t\t\t\t\t\t: undefined\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t<MenuItem onClick={onNodeDelete}>Delete Node</MenuItem>\r\n\t\t\t</Menu>\r\n\r\n\t\t</ReactFlow>\r\n\r\n\t);\r\n}\r\n\r\nexport default ReactFlowChart;","import React, { useState } from \"react\";\r\nimport \"./App.css\";\r\nimport mondaySdk from \"monday-sdk-js\";\r\nimport Search from \"monday-ui-react-core/dist/icons/Search\";\r\n\r\nimport { removeElements } from 'react-flow-renderer';\r\nimport ItemNode from \"./nodes/ItemNode.js\";\r\nimport PrettyItemNode from \"./nodes/PrettyItemNode.js\";\r\nimport NodeFunctions from \"./nodes/NodeFunctions.js\";\r\nimport \"./css/node-view.css\";\r\n\r\nimport Button from \"monday-ui-react-core/dist/Button.js\";\r\nimport \"monday-ui-react-core/dist/Button.css\";\r\nimport UIOverlay from \"./components/UIOverlay\";\r\n\r\nimport ReactFlowChart from \"./ReactFlowChart.js\";\r\n\r\n\r\nconst monday = mondaySdk();\r\nconst nodeHelper = new NodeFunctions(monday);\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    // Default state\r\n    this.state = {\r\n      settings: {},\r\n      name: \"\",\r\n    };\r\n  }\r\n\r\n  // use to communicate with event listeners\r\n  componentDidMount() {\r\n    monday.listen(\"settings\", res => {\r\n      this.setState({ settings: res.data });\r\n    });\r\n\r\n    monday.listen(\"context\", res => {\r\n      this.setState({ context: res.data });\r\n\r\n      // board info query\r\n      monday.api(`query ($boardIds: [Int]) \r\n      { \r\n        boards (ids:$boardIds) { \r\n          name \r\n          items { id name group {title color} column_values { title text } } \r\n          columns {\r\n            title\r\n            settings_str\r\n          }\r\n        } \r\n      }`,\r\n        { variables: { boardIds: this.state.context.boardIds } }\r\n      ).then(res => {\r\n        this.setState({ boardData: res.data });\r\n      });\r\n\r\n      console.log(this.state.context);\r\n    });\r\n\r\n    monday.listen(\"itemIds\", (res) => {\r\n      this.setState({ filteredItems: res.data });\r\n    });\r\n\r\n    monday.listen(\"events\", (res) => {\r\n      switch (res[\"type\"]) {\r\n        case \"new_items\":\r\n          alert(\"NEW ITEM BRUH\");\r\n          break;\r\n        case \"change_column_value\":\r\n          break;\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n\r\n    // what to do when the user clicks on an element\r\n    function onElementClick(event, element) {\r\n\r\n      // checks for ignore node click\r\n      if (event == null) { return; }\r\n      try {\r\n        console.log(JSON.stringify(event));\r\n      }\r\n      catch {\r\n        console.log(\"spaghetti code oh yeah\")\r\n        return;\r\n      }\r\n      if (nodeHelper.EventHasClass(event, \"ignore-node-on-click\")) {\r\n        console.log(\"Click detected, but ignoring.\");\r\n        return;\r\n      }\r\n\r\n      // only do node actions if it's our node\r\n      if (typeof (element) === typeof (PrettyItemNode)) {\r\n        // monday.com FUCKING SUCKS BECAUSE THEIR API IS FUCKING BROKEN SINCE AUGUST AND THIS DOESN'T FUCKING WORK\r\n        //monday.execute('openItemCard', { itemId: element[\"id\"], kind: 'columns' });\r\n\r\n        console.log('node actions happened i guess', event);\r\n\r\n        monday.execute('openItemCard', { itemId: element[\"id\"], kind: 'columns' });\r\n      }\r\n      else {\r\n        alert(\"OH\");\r\n      }\r\n    }\r\n\r\n    // note: adding a background threw a shit ton of errors for some reason whoops\r\n    return (\r\n      <div\r\n        className=\"App\"\r\n        style={{\r\n          display: \"block\",\r\n          background: \"var(--color-mud_black)\",\r\n          fontFamily: \"Roboto, sans-serif\"\r\n        }}\r\n      >\r\n\r\n\r\n\r\n        <ReactFlowChart\r\n          boardData={this.state.boardData?.boards}\r\n          filteredItems={this.state?.filteredItems}\r\n          onElementClick={onElementClick}\r\n          pathSettings={this.state.settings?.pathdisplay}\r\n          edgeGripSetting={this.state.settings?.edgeGrips}\r\n          backgroundSettings={this.state.settings?.backgroundType}\r\n          nodeHelper={nodeHelper}\r\n          monday={monday}\r\n        //boardElements={boardElements}\r\n        //nodeTypes={nodeTypes}\r\n        />\r\n\r\n\r\n\r\n        <UIOverlay>\r\n          <Button\r\n            size=\"small\"\r\n            style={{ marginRight: \"8px\" }}\r\n            onClick={() => {\r\n              console.log(\"priority being found...\");\r\n            }}>\r\n            Find Priority\r\n          </Button>\r\n          <Button\r\n            size=\"small\"\r\n            style={{ marginRight: \"8px\" }}\r\n            onClick={() => {\r\n              console.log(\"visualizing group priorities...\");\r\n            }}>\r\n            Visualize Group Priorities\r\n          </Button>\r\n          <Button\r\n            size=\"small\" kind=\"secondary\"\r\n            style={{ marginRight: \"8px\" }}\r\n            onClick={() => {\r\n            }}>\r\n            Recenter\r\n          </Button>\r\n          <Button\r\n            size=\"small\" kind=\"secondary\"\r\n            style={{ marginRight: \"8px\" }}\r\n            onClick={() => {\r\n              monday.execute(\"confirm\", {\r\n                message: \"Are you sure you want to reset the nodes? \" +\r\n                  \"You will lose all of the connections that you have made, and all of the original connections will be returned.\",\r\n                confirmButton: \"Confirm\",\r\n                cancelButton: \"Cancel\",\r\n                excludeCancelButton: false\r\n              }).then((res) => {\r\n                if (res.data[\"confirm\"] === true) {\r\n                  // do the reset here\r\n                }\r\n              });\r\n            }}\r\n            style={{ marginRight: \"8px\" }}>\r\n            Reset\r\n          </Button>\r\n        </UIOverlay>\r\n      </div >\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}