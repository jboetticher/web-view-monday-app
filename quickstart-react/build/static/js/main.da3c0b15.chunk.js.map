{"version":3,"sources":["nodes/PrettyItemNode.js","nodes/NodeFunctions.js","components/PriorityGraphs.js","components/FindPriorityButton.js","components/UIOverlay.js","nodes/CustomConnectionLine.js","ReactFlowChart.js","App.js","serviceWorker.js","index.js"],"names":["memo","data","useState","collapsed","setCollapsed","chevronDownStyle","bottom","top","chevronUpStyle","collapseButtonChip","Avatar","className","style","left","onClick","notCollapsedData","maxWidth","width","group","columnValues","map","x","i","key","fakeTopHandle","background","height","fakeLeftHandle","fakeRightHandle","right","fakeBotHandle","position","groupColor","borderRadius","Chip","size","label","outgoingNodes","length","type","id","opacity","title","textAlign","statusData","padding","marginTop","NodeFunctions","mondaySdk","this","monday","QueryConnections","QueryPositions","event","classList","Object","entries","storage","instance","getItem","then","res","console","log","value","connections","JSON","parse","onConnectParams","replaceIndex","source","target","sourceHandle","push","jsonString","stringify","setItem","sourceId","targetId","sourceHandleId","splice","conArray","c","positions","onNodeDragStopParams","itemId","callback","api","variables","parseInt","PriorityGraph","props","paddingTop","display","y","FindPriorityButton","transform","useZoomPanHelper","useStoreState","store","nodes","currTransform","lerp","start","end","time","marginRight","e","priority","highestPriorityIndex","nodeCount","forEach","node","FindPriority","currX","currY","panner","setInterval","repos","zoom","clearInterval","UIOverlay","zIndex","visibility","children","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition","edgePath","connectionLineType","connectionLineStyle","getBezierPath","fill","stroke","strokeWidth","d","cx","cy","r","ReactFlowChart","statusColors","loadPositions","currElements","savedPositions","nodeHelper","GetPositions","undefined","element","posData","updateOutgoingNodesData","onlyNodes","getOutgoers","htmlNodes","document","getElementsByClassName","htmlNodeId","j","innerText","setUpNewEdge","targetHandle","newEdgeId","pathSettings","animated","labelStyle","labelBgBorderRadius","labelBgStyle","edgeGripSetting","generateElements","bdata","filteredItems","gendElements","columnData","board","bIndex","indexOf","groupIds","groupIndex","currentGroupId","item","itIndex","groupName","titleName","nodeBackgroundColor","filteredData","colorString","num","numIndex","nodeColorOnFilter","itemColumnValues","boardColumnData","statusSettings","column","cIndex","statusInfoJson","labelData","localID","name","status","color","statusColor","isConnecting","boxShadow","savedConnections","GetConnections","connection","newEdge","loadConnections","nodeTypes","prettyNode","PrettyItemNode","elements","setElements","useEffect","boardData","backgroundSettings","variant","gap","initialEdgeContextMenuState","currEdge","mouseX","mouseY","initialNodeContextMenuState","currNode","React","edgeContextMenuState","setEdgeContextMenuState","nodeContextMenuState","setNodeContextMenuState","defaultClose","flowChart","onElementClick","onConnect","params","els","addEdge","AddConnection","onNodeDragStop","AddPosition","onNodeContextMenu","preventDefault","clientX","clientY","onContextMenu","parentNode","firstChild","connectionLineComponent","CustomConnectionLine","Menu","keepMounted","open","onClose","anchorReference","anchorPosition","MenuItem","currEdgeId","RemoveConnection","removeElements","execute","message","confirmButton","cancelButton","excludeCancelButton","nodeToDelete","edgesToDelete","concat","RemoveConnections","DeleteItem","boardDataQuery","App","state","settings","chartView","listen","setState","context","boardIds","alert","chartViewElement","bind","boards","pathdisplay","edgeGrips","backgroundType","EventHasClass","kind","findPriorityEvent","PriorityGraphs","fontFamily","Component","Boolean","window","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error"],"mappings":"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","file":"static/js/main.da3c0b15.chunk.js","sourcesContent":["import React, { memo, useState, useEffect } from 'react';\r\nimport { Handle } from 'react-flow-renderer';\r\nimport ChevronDown from \"monday-ui-react-core/dist/icons/DropdownChevronDown\";\r\nimport ChevronUp from \"monday-ui-react-core/dist/icons/DropdownChevronUp\";\r\nimport Chip from '@material-ui/core/Chip';\r\nimport Avatar from '@material-ui/core/Avatar';\r\n\r\n// todo: make color of node change based on whether or not it's finished\r\n// todo: make the color of the dependent nodes change based on whether or not it's finished\r\n\r\n\r\nexport default memo(({ data }) => {\r\n\r\n    // collapsed vs not collapsed\r\n    let [collapsed, setCollapsed] = useState(true);\r\n    var chevronDownStyle = collapsed ? { bottom: '-2px' } : { top: '-2px' };\r\n    var chevronUpStyle = collapsed ? { top: '-2px' } : { bottom: '-2px' };\r\n    var collapseButtonChip =\r\n        <Avatar className={\"small-avatar pos-absolute collapse-chip ignore-node-on-click\"}\r\n            style={{ left: \"-10px\", top: \"-10px\" }}\r\n            onClick={() => {\r\n                setCollapsed(!collapsed);\r\n            }}\r\n        >\r\n            <ChevronUp className={\"pos-absolute noClick\"} style={chevronUpStyle} />\r\n            <ChevronDown className={\"pos-absolute noClick\"} style={chevronDownStyle} />\r\n        </Avatar>;\r\n\r\n    // generates the divs for when it's collapsed and when it's not\r\n    var notCollapsedData = collapsed ? <div /> :\r\n        <div style={{ maxWidth: \"300px\" }}>\r\n            <table>\r\n                <tbody>\r\n                    <tr>\r\n                        <td>Group</td>\r\n                        <td style={{ width: \"16px\" }} />\r\n                        <td className={\"centered-td\"}>{data?.group}</td>\r\n                    </tr>\r\n                    {data?.columnValues.map((x, i) => {\r\n                        switch (x['title']) {\r\n                            case \"Subitems\":\r\n                            case \"Person\":\r\n                            case \"Status\":\r\n                                return <tr key={i}></tr>;\r\n                            default:\r\n                                return (\r\n                                    <tr key={i}>\r\n                                        <td>{x['title']}</td>\r\n                                        <td style={{ width: \"16px\" }} />\r\n                                        <td className={\"centered-td\"}>\r\n                                            {x['text'] === \"\" || x['text'] === null ? \"- - -\" : x['text']}\r\n                                        </td>\r\n                                    </tr>\r\n                                );\r\n                        }\r\n                    })}\r\n                </tbody>\r\n            </table>\r\n\r\n        </div>;\r\n\r\n    //css styles for the handles (these are large and opacity 0)\r\n    //determines the \"hitbox\" for the handles\r\n    //currently the path connects into these hitboxes so it looks strange if it sticks out more than the fake dot            \r\n    var targetStyle = { background: '#0071d9', width: '30%', height: '20px', borderRadius: '0%', top: '-5px', opacity: '0%' };\r\n    var sourceStyleLeft = { background: 'var(--color-mud_black)', width: '20px', height: '30%', borderRadius: '0%', left: '-5px', opacity: '0%' };\r\n    var sourceStyleRight = { background: 'var(--color-mud_black)', width: '20px', height: '30%', borderRadius: '0%', right: '-5px', opacity: '0%' };\r\n    var sourceStyleBot = { background: 'var(--color-mud_black)', width: '30%', height: '20px', borderRadius: '0%', bottom: '-5px', opacity: '0%' };\r\n\r\n    //these are the little handle dots (purely visual)\r\n    var fakeTopHandle = <div className='react-flow__handle-top react-flow__handle' style={{ background: '#0071d9', width: '10px', height: '10px', top: '-5px' }}></div>;\r\n    var fakeLeftHandle = <div className='react-flow__handle-left react-flow__handle' style={{ background: 'var(--color-mud_black)', width: '10px', height: '10px', left: '-5px' }}></div>;\r\n    var fakeRightHandle = <div className='react-flow__handle-right react-flow__handle' style={{ background: 'var(--color-mud_black)', width: '10px', height: '10px', right: '-5px' }}></div>;\r\n    var fakeBotHandle = <div className='react-flow__handle-bottom react-flow__handle' style={{ background: 'var(--color-mud_black)', width: '10px', height: '10px', bottom: '-5px' }}></div>;\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n            <div style={{\r\n                position: \"fixed\",\r\n                background: data?.groupColor,\r\n                height: \"16px\",\r\n                borderRadius: \"8px\",\r\n                top: \"0px\", left: \"0px\", right: \"0px\",\r\n            }}>\r\n                <div style={{\r\n                    position: \"absolute\",\r\n                    background: data?.groupColor,\r\n                    height: \"8px\",\r\n                    bottom: \"0px\", left: \"0px\", right: \"0px\"\r\n                }} />\r\n                {collapseButtonChip}\r\n                <Chip \r\n                    size={\"medium\"}\r\n                    label={data?.outgoingNodes.length}\r\n                    style={{\r\n                        position: \"absolute\",\r\n                        right: \"-8px\", top: \"-8px\",\r\n                        background: data?.groupColor\r\n                    }}\r\n                />\r\n            </div>\r\n\r\n            <Handle\r\n                type=\"target\"\r\n                position=\"top\"\r\n                id=\"t\"\r\n                style={targetStyle}\r\n            />\r\n            <Handle\r\n                type=\"source\"\r\n                position=\"bottom\"\r\n                id=\"b\"\r\n                style={sourceStyleBot}\r\n            />\r\n            <Handle\r\n                type=\"source\"\r\n                position=\"right\"\r\n                id=\"r\"\r\n                style={sourceStyleRight}\r\n            />\r\n            <Handle\r\n                type=\"source\"\r\n                position=\"left\"\r\n                id=\"l\"\r\n                style={sourceStyleLeft}\r\n            />\r\n            {fakeTopHandle}\r\n            {fakeLeftHandle}\r\n            {fakeRightHandle}\r\n            {fakeBotHandle}\r\n\r\n            <div style={{ maxWidth: \"170px\" }}>\r\n                <h4>{data?.title}</h4>\r\n            </div>\r\n            {notCollapsedData}\r\n            <div style={{\r\n                textAlign: \"center\",\r\n                background: data?.statusData['color'],\r\n                borderRadius: \"4px\",\r\n                padding: \"4px\",\r\n                marginTop: \"8px\"\r\n            }}>\r\n                {data?.statusData['status'] === \"\" ? \"Empty\" : data.statusData['status']}\r\n            </div>\r\n\r\n        </>\r\n    );\r\n});","import React, { memo } from 'react';\r\nimport { Handle } from 'react-flow-renderer';\r\nimport mondaySdk from \"monday-sdk-js\";\r\n\r\nclass NodeFunctions {\r\n\r\n    constructor(mondaySdk) {\r\n        this.monday = mondaySdk;\r\n\r\n        // Querying from monday.com\r\n        this.QueryConnections();\r\n        this.QueryPositions();\r\n    }\r\n\r\n    EventHasClass(event, className) {\r\n        if (event[\"path\"] == null) { return false; }\r\n        var classList = Object.entries(event[\"path\"][0]['classList']);\r\n        for (var i = 0; i < classList.length; i++) {\r\n            if (classList[i][1] === className) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    //#region Connections\r\n\r\n    /* Queries the connection data from monday.com.\r\n     */\r\n    QueryConnections() {\r\n        this.monday.storage.instance.getItem('connection_objects').then(res => {\r\n            console.log(res);\r\n\r\n            if (res.data.value !== null) {\r\n                this.connections = JSON.parse(res.data.value);\r\n                console.log(this.connections);\r\n            }\r\n            else {\r\n                this.connections = [];\r\n                console.log(this.connections);\r\n            }\r\n        });\r\n    }\r\n\r\n    /* Returns the connection data from monday.com in a object format.\r\n     */\r\n    GetConnections() {\r\n        return this.connections;\r\n    }\r\n\r\n    /* \r\n     * Adds and saves connections between two nodes.\r\n     * onConnectParams - the parameters that you get when a connection is made\r\n     */\r\n    AddConnection(onConnectParams) {\r\n\r\n        // if it's null we ain't messing with it\r\n        if (onConnectParams == null) { return; }\r\n        console.log(\"saving connections \", onConnectParams);\r\n\r\n        // checks to see if the current array has any of those connections\r\n        var replaceIndex = -1;\r\n        for (var i = 0; i < this.connections.length; i++) {\r\n            if (this.connections[i].source == onConnectParams.source &&\r\n                this.connections[i].target == onConnectParams.target &&\r\n                this.connections[i].sourceHandle == onConnectParams.sourceHandle) {\r\n                replaceIndex = i;\r\n                break;\r\n            }\r\n        }\r\n\r\n        // add or replace to the current array of connections \r\n        if (replaceIndex < 0) {\r\n            this.connections.push(onConnectParams);\r\n        }\r\n        else {\r\n            this.connections[i] = onConnectParams;\r\n        }\r\n\r\n        // json stringify the current connections\r\n        const jsonString = JSON.stringify(this.connections);\r\n\r\n        // save to monday.com persist\r\n        this.monday.storage.instance.setItem('connection_objects', jsonString).then(res => {\r\n            console.log(res);\r\n            console.log(jsonString);\r\n\r\n            this.QueryConnections();\r\n        });\r\n    }\r\n\r\n    /* Removes a single connection between two nodes from monday.com\r\n     * sourceId - the id of the source node\r\n     * targetId - the id of the target node\r\n     * sourceHandleId - the handle id of the source node\r\n     */\r\n    RemoveConnection(sourceId, targetId, sourceHandleId) {\r\n        // checks to see if the current array has one of those connections\r\n        var replaceIndex = -1;\r\n        for (var i = 0; i < this.connections.length; i++) {\r\n            if (this.connections[i].source == sourceId &&\r\n                this.connections[i].target == targetId &&\r\n                this.connections[i].sourceHandle == sourceHandleId) {\r\n                replaceIndex = i;\r\n                console.log(\"REMOVING FROM DATABASE\", this.connections[i]);\r\n                break;\r\n            }\r\n        }\r\n\r\n        // if the index isn't negative then it deletes\r\n        if (replaceIndex >= 0) {\r\n            // splices the target that was removed\r\n            console.log(\"BEFORE REMOVAL:\", this.connections);\r\n            this.connections.splice(i, 1);\r\n            console.log(\"AFTER REMOVAL:\", this.connections);\r\n            // json stringify the current connections\r\n            const jsonString = JSON.stringify(this.connections);\r\n\r\n            // save to monday.com persist\r\n            this.monday.storage.instance.setItem('connection_objects', jsonString).then(res => {\r\n                console.log(res);\r\n                console.log(jsonString);\r\n\r\n                this.QueryConnections();\r\n            });\r\n        }\r\n    }\r\n\r\n    /* Removes an array of connections from monday.com\r\n     * conArray - array of connections/edges to be removed\r\n     */\r\n    RemoveConnections(conArray) {\r\n        //console.log(\"REMOVING THESE CONNECTIONS\", conArray);\r\n        // loop through all connections to be deleted\r\n        for (var c = 0; c < conArray.length; c++) {\r\n            // checks to see if the current array has one of those connections\r\n            var replaceIndex = -1;\r\n            for (var i = 0; i < this.connections.length; i++) {\r\n                if (this.connections[i].source == conArray[c]['source'] &&\r\n                    this.connections[i].target == conArray[c]['target'] &&\r\n                    this.connections[i].sourceHandle == conArray[c]['sourceHandle']) {\r\n                    replaceIndex = i;\r\n                    console.log(\"REMOVING FROM DATABASE\", this.connections[i]);\r\n                    break;\r\n                }\r\n            }\r\n\r\n            // if the index isn't negative then it deletes\r\n            if (replaceIndex >= 0) {\r\n                // splices the target that was removed\r\n                console.log(\"BEFORE REMOVAL:\", this.connections);\r\n                this.connections.splice(i, 1);\r\n                console.log(\"AFTER REMOVAL:\", this.connections);\r\n            }\r\n        }\r\n\r\n        // json stringify the current connections\r\n        const jsonString = JSON.stringify(this.connections);\r\n\r\n        // save to monday.com persist as one call\r\n        this.monday.storage.instance.setItem('connection_objects', jsonString).then(res => {\r\n            console.log(res);\r\n            console.log(jsonString);\r\n\r\n            this.QueryConnections();\r\n        });\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Positions\r\n\r\n    /* Queries the position data from monday.com.\r\n     */\r\n    QueryPositions() {\r\n        this.monday.storage.instance.getItem('node_positions').then(res => {\r\n            console.log(res);\r\n\r\n            if (res.data.value !== null) {\r\n                this.positions = JSON.parse(res.data.value);\r\n                console.log(this.positions);\r\n            }\r\n            else {\r\n                this.positions = [];\r\n                console.log(this.positions);\r\n            }\r\n        });\r\n    }\r\n\r\n    /* Returns the position data from monday.com in a object format.\r\n     */\r\n    GetPositions() {\r\n        return this.positions;\r\n    }\r\n\r\n    /* \r\n    * Adds and saves connections between two nodes.\r\n    * onConnectParams - the parameters that you get when a connection is made\r\n    */\r\n    AddPosition(onNodeDragStopParams) {\r\n\r\n        // if it's null we ain't messing with it\r\n        if (onNodeDragStopParams == null) { return; }\r\n        console.log(\"saving positions \", onNodeDragStopParams);\r\n\r\n        // checks to see if the current array has any of those positions\r\n        var replaceIndex = -1;\r\n        for (var i = 0; i < this.positions.length; i++) {\r\n            if (this.positions[i].id == onNodeDragStopParams.id) {\r\n                replaceIndex = i;\r\n                break;\r\n            }\r\n        }\r\n\r\n        // add or replace to the current array of positions \r\n        if (replaceIndex < 0) {\r\n            this.positions.push({\r\n                \"id\": onNodeDragStopParams.id,\r\n                \"position\": onNodeDragStopParams.position\r\n            });\r\n        }\r\n        else {\r\n            this.positions[i].position = onNodeDragStopParams.position;\r\n        }\r\n\r\n        // json stringify the current connections\r\n        const jsonString = JSON.stringify(this.positions);\r\n\r\n        // save to monday.com persist\r\n        this.monday.storage.instance.setItem('node_positions', jsonString).then(res => {\r\n            console.log(res);\r\n            console.log(jsonString);\r\n\r\n            this.QueryPositions();\r\n        });\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Database Manipulation\r\n\r\n    DeleteItem(itemId, callback) {\r\n        console.log(typeof (itemId));\r\n        console.log(itemId);\r\n        // delete item query\r\n        this.monday.api(`mutation ($itemId: Int) \r\n        { \r\n            delete_item (item_id: $itemId) { id } \r\n        }`,\r\n            { variables: { itemId: parseInt(itemId) } }\r\n        ).then(res => {\r\n            callback();\r\n            //this.setState({ boardData: res.data });\r\n        });\r\n\r\n        // finds all of the edges and tries to de\r\n    }\r\n\r\n    //#endregion\r\n}\r\n\r\nexport default NodeFunctions;","import React from 'react';\r\nimport { XYPlot, XAxis, YAxis, HorizontalGridLines, LineSeries, VerticalBarSeries } from 'react-vis';\r\n\r\nlet PriorityGraph = props => {\r\n\r\n    return (\r\n        <div style={{\r\n            position: \"absolute\",\r\n            top: \"0px\", bottom: \"0px\", right: \"0px\", left: \"0px\",\r\n            paddingTop: \"80px\"\r\n        }}\r\n        >\r\n            <div style={{\r\n                display: \"flex\"\r\n            }}>\r\n                <div className=\"plot-graph\">\r\n                    <h3 style={{ textAlign: \"center\" }}>Total Dependencies</h3>\r\n                    <XYPlot\r\n                        width={500}\r\n                        height={500}>\r\n                        <HorizontalGridLines />\r\n                        <VerticalBarSeries\r\n                            data={[\r\n                                { x: 1, y: 10 },\r\n                                { x: 2, y: 5 },\r\n                                { x: 3, y: 15 }\r\n                            ]} />\r\n                        <XAxis />\r\n                        <YAxis />\r\n                    </XYPlot>\r\n                </div>\r\n                <div className=\"plot-graph\">\r\n                    <h3 style={{ textAlign: \"center\" }}>Dependencies Per Item</h3>\r\n                    <XYPlot\r\n                        width={500}\r\n                        height={500}>\r\n                        <HorizontalGridLines />\r\n                        <VerticalBarSeries\r\n                            data={[\r\n                                { x: 1, y: 2 },\r\n                                { x: 2, y: 5 },\r\n                                { x: 3, y: 12 }\r\n                            ]} />\r\n                        <XAxis />\r\n                        <YAxis />\r\n                    </XYPlot>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PriorityGraph;\r\nexport { PriorityGraph };","import React from 'react';\r\nimport Button from \"monday-ui-react-core/dist/Button.js\";\r\nimport \"monday-ui-react-core/dist/Button.css\";\r\nimport { useZoomPanHelper, useStoreState } from 'react-flow-renderer';\r\n\r\nlet FindPriorityButton = props => {\r\n\r\n    const { transform } = useZoomPanHelper();\r\n    let [nodes, width, height, currTransform] = useStoreState((store) => {\r\n        return [store.nodes, store.width, store.height, store.transform];\r\n    });\r\n\r\n    function FindPriority() {\r\n        var highestPriorityIndex = 0;\r\n        var nodeCount = 0;\r\n        Object.entries(nodes).forEach(function (node, i) {\r\n            if (node[1].data.outgoingNodes.length > nodeCount) {\r\n                nodeCount = node[1].data.outgoingNodes.length;\r\n                highestPriorityIndex = i;\r\n            }\r\n        });\r\n\r\n        return nodes[highestPriorityIndex];\r\n    }\r\n\r\n    function lerp(start, end, time) {\r\n        return start * (1 - time) + end * time;\r\n    }\r\n\r\n    return (\r\n        <Button\r\n            size=\"small\"\r\n            style={{ marginRight: \"8px\" }}\r\n            onClick={(e) => {\r\n                let priority = FindPriority();\r\n                let time = 0;\r\n\r\n                /*\r\n                //loop through the html of the nodes\r\n                var desiredNode = null;\r\n                let htmlNodes = document.getElementsByClassName(\"react-flow__node\");\r\n                console.log(htmlNodes);\r\n                for (var i = 0; i < htmlNodes.length; i++) {\r\n\r\n                    console.log(\"broof\");\r\n                    //get id of the node from the class name\r\n                    let htmlNodeId = htmlNodes[i].classList[2];\r\n\r\n                    if (htmlNodeId == priority.id) {\r\n                        desiredNode = htmlNodes[i];\r\n                        console.log(\"bruh\", htmlNodes[i]);\r\n                        break;\r\n                    }\r\n                }\r\n                */\r\n\r\n                let [currX, currY] = [currTransform[0], currTransform[1]];\r\n                let x = -priority.position.x + width / 2 - 85;\r\n                let y = -priority.position.y + height / 2 - 63;\r\n\r\n                const panner = setInterval(() => {\r\n                    var repos = {\r\n                        x: lerp(currX, x, time),\r\n                        y: lerp(currY, y, time),\r\n                        zoom: 1\r\n                    };\r\n\r\n                    transform(repos);\r\n                    time += 0.05;\r\n\r\n                    if (time >= 1) clearInterval(panner);\r\n                }, 10);\r\n            }}>\r\n            Find Priority\r\n        </Button>\r\n    );\r\n}\r\n\r\nexport { FindPriorityButton };\r\nexport default FindPriorityButton;","import React from 'react';\r\n\r\nlet UIOverlay = props => {\r\n    return (\r\n        <div style={{\r\n            zIndex: \"100\",\r\n            position: \"absolute\",\r\n            top: \"0px\", bottom: \"0px\", right: \"0px\", left: \"0px\",\r\n            visibility: \"hidden\"\r\n        }}>\r\n            <span className=\"ui-overlay-item\">\r\n                {props?.children}\r\n            </span>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport { UIOverlay };\r\nexport default UIOverlay;","import React from 'react';\r\nimport { getBezierPath } from 'react-flow-renderer';\r\n\r\nexport default ({\r\n    sourceX,\r\n    sourceY,\r\n    sourcePosition,\r\n    targetX,\r\n    targetY,\r\n    targetPosition,\r\n    connectionLineType,\r\n    connectionLineStyle,\r\n}) => {\r\n\r\n    const edgePath = getBezierPath({ sourceX, sourceY, sourcePosition, targetX, targetY, targetPosition });\r\n    //straight path\r\n    //d={`M${sourceX},${sourceY} L ${targetX},${targetY}`}\r\n\r\n    return (\r\n        <g>\r\n            <path\r\n                fill=\"none\"\r\n                stroke=\"#fff\"\r\n                strokeWidth={5}\r\n                className=\"animated\"\r\n\r\n                d={edgePath}\r\n\r\n            />\r\n            <circle cx={targetX} cy={targetY} fill=\"#0071d9\" r={5} stroke=\"#fff\" strokeWidth={1.5} />\r\n        </g>\r\n    );\r\n};","import React, { useState, useEffect } from \"react\";\r\nimport ReactFlow, { removeElements, addEdge, Controls, Background, getIncomers, getOutgoers } from 'react-flow-renderer';\r\nimport PrettyItemNode from \"./nodes/PrettyItemNode.js\";\r\nimport CustomConnectionLine from \"./nodes/CustomConnectionLine.js\";\r\n\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\nlet ReactFlowChart = props => {\r\n\r\n\t// this is an example of an infinite loop. The same thing happens again and again in the same frame\r\n\t// dab exists -> renders -> dab is set -> renders -> dab is set-> ...\r\n\t//const [dab, setDab] = useState(5);\r\n\t// setDab(4);\r\n\r\n\t// returns the right color based on the current filter\r\n\tfunction nodeColorOnFilter(filteredData, itemId) {\r\n\r\n\t\tif (filteredData == null) return \"var(--color-snow_white)\";\r\n\r\n\t\tvar colorString = \"var(--color-jarco_gray)\";\r\n\t\tObject.entries(filteredData).forEach(function (num, numIndex) {\r\n\t\t\t//console.log(\"suggestion for \" + itemId + \": \" + num[1]);\r\n\t\t\tif (itemId == num[1]) {\r\n\t\t\t\tcolorString = \"var(--color-snow_white)\";\r\n\t\t\t\t//console.log(\"Holy smokes, you did it! they're equal! now colorstring: \" + colorString);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn colorString;\r\n\t}\r\n\r\n\t// determines the color of a node\r\n\tvar statusColors = null;\r\n\tfunction statusColor(itemColumnValues, boardColumnData) {\r\n\r\n\t\t// retrieves the status colors if not done already\r\n\t\tif (statusColors == null) {\r\n\r\n\t\t\tvar statusSettings = \"pog\";\r\n\t\t\tboardColumnData?.forEach(function (column, cIndex) {\r\n\t\t\t\tif (column['title'] == \"Status\") {\r\n\t\t\t\t\tstatusSettings = column['settings_str'];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tstatusColors = {};\r\n\t\t\tvar statusInfoJson = JSON.parse(statusSettings);\r\n\t\t\tObject.entries(statusInfoJson['labels']).forEach(function (labelData) {\r\n\t\t\t\tvar localID = labelData[0];\r\n\t\t\t\tvar name = labelData[1];\r\n\t\t\t\tstatusColors[name] = statusInfoJson['labels_colors'][localID]['color'];\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// gets the status from the column values\r\n\t\tvar status = \"\";\r\n\t\titemColumnValues?.forEach(function (column, cIndex) {\r\n\t\t\tif (column['title'] === \"Status\") {\r\n\t\t\t\tstatus = column['text'];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// returns the right color css\r\n\t\tif (status in statusColors) return { status: status, color: statusColors[status] };\r\n\t\telse { return { status: \"\", color: \"var(--color-ui_grey)\" }; }\r\n\t}\r\n\r\n\t//#region Loading\r\n\r\n\tfunction loadPositions(currElements) {\r\n\t\t//Get the saved data\r\n\t\tlet savedPositions = props?.nodeHelper.GetPositions();\r\n\r\n\t\t//if there was no saved positional data, return\r\n\t\tif (savedPositions == undefined) return currElements;\r\n\r\n\t\tconsole.log(\"loading saved node positions of\", currElements);\r\n\r\n\t\t//loop through current elements in board\r\n\t\tcurrElements.forEach(function (element) {\r\n\t\t\t// if the element is not a node, skip it\r\n\t\t\tif (element['type'] != \"prettyNode\") return;\r\n\r\n\t\t\t// loop through the saved position data\r\n\t\t\tsavedPositions.forEach(function (posData) {\r\n\r\n\t\t\t\t//if the saved position data id matches the current element id\r\n\t\t\t\t//update the current element's position\r\n\t\t\t\tif (posData['id'] == element['id']) {\r\n\t\t\t\t\telement['position']['x'] = posData['position']['x'];\r\n\t\t\t\t\telement['position']['y'] = posData['position']['y'];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t});\r\n\r\n\t\treturn currElements;\r\n\t}\r\n\r\n\t//returns an array of elements populated with saved connections\r\n\tfunction loadConnections(currElements) {\r\n\t\t//Get the saved data\r\n\t\tlet savedConnections = props?.nodeHelper.GetConnections();\r\n\r\n\t\t//if there was no saved positional data, return\r\n\t\tif (savedConnections == undefined) return currElements;\r\n\r\n\t\tconsole.log(\"loading saved connections of\", currElements);\r\n\r\n\t\t// create an array of only nodes in the board\r\n\t\t/*let onlyNodes = [];\r\n\t\tcurrElements.forEach(function (element) {\r\n\t\t\t// if the element is not a node, skip it\r\n\t\t\tif (element['type'] == \"prettyNode\") {\r\n\t\t\t\tonlyNodes.push(element);\r\n\t\t\t}\r\n\t\t});*/\r\n\r\n\t\t// add in all the saved connections\r\n\t\tsavedConnections.forEach(function (connection) {\r\n\t\t\tlet newEdge = setUpNewEdge(connection['source'], connection['target'], connection['sourceHandle'], connection['targetHandle']);\r\n\r\n\t\t\t//console.log('edgeloaded:', newEdge);\r\n\t\t\t//onlyNodes.push(newEdge);\r\n\t\t\tcurrElements.push(newEdge);\r\n\r\n\t\t});\r\n\r\n\t\tconsole.log(\"loaded saved connections and returning\", currElements);\r\n\r\n\t\treturn currElements;\r\n\t\t//return onlyNodes;\r\n\t}\r\n\r\n\t//#endregion\r\n\r\n\t// provides the nodes passed in with data from getIncomers()\r\n\tfunction updateOutgoingNodesData(currElements) {\r\n\r\n\t\tconsole.log(\"updating data of\", currElements);\r\n\r\n\t\t// loop through board data\r\n\t\tlet onlyNodes = [];\r\n\t\tcurrElements.forEach(function (element) {\r\n\r\n\t\t\t// if the element is not a node, skip it\r\n\t\t\tif (element['type'] != \"prettyNode\") return;\r\n\r\n\t\t\t//element['data']['incomingNodes'] = getIncomers(element, currElements);\r\n\t\t\telement['data']['outgoingNodes'] = getOutgoers(element, currElements);\r\n\t\t\tonlyNodes.push(element);\r\n\r\n\t\t});\r\n\t\t//console.log(document.getElementsByClassName(\"react-flow__node\"));\r\n\r\n\t\t//the point of the code below is a workaround for the node not re-rendering on data change\r\n\t\t//loop through the html of the nodes\r\n\t\tlet i = 0;\r\n\t\tlet htmlNodes = document.getElementsByClassName(\"react-flow__node\");\r\n\t\tfor (i = 0; i < htmlNodes.length; i++) {\r\n\r\n\t\t\t//get id of the node from the class name\r\n\t\t\tlet htmlNodeId = htmlNodes[i].classList[2];\r\n\r\n\t\t\tlet j = 0;\r\n\t\t\tfor (j = 0; j < onlyNodes.length; j++) {\r\n\t\t\t\t//if id of html node matches the json data node, update the outgoingNodes counter\r\n\t\t\t\tif (htmlNodeId == onlyNodes[j]['id']) {\r\n\t\t\t\t\tlet currLabel = htmlNodes[i].getElementsByClassName(\"MuiChip-label\")[0];\r\n\t\t\t\t\tcurrLabel.innerText = onlyNodes[j]['data']['outgoingNodes'].length + \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn currElements;\r\n\t}\r\n\r\n\t// returns a json edge element with the correct styling and data\r\n\tfunction setUpNewEdge(source, target, sourceHandle, targetHandle) {\r\n\t\tlet newEdgeId = 'e' + source + '_' + sourceHandle + '-' + target;\r\n\t\tlet newEdge = {\r\n\t\t\tid: newEdgeId,\r\n\t\t\tsource: source,\r\n\t\t\ttarget: target,\r\n\t\t\tsourceHandle: sourceHandle,\r\n\t\t\ttargetHandle: targetHandle,\r\n\t\t\tclassName: newEdgeId,\r\n\r\n\t\t\ttype: props?.pathSettings,\r\n\t\t\tanimated: true,\r\n\r\n\t\t\tstyle: { stroke: '#fff', strokeWidth: '5px' },\r\n\t\t\tlabel: \"jank\",\r\n\t\t\tlabelStyle: { visibility: 'hidden' },\r\n\t\t\tlabelBgBorderRadius: '100%',\r\n\t\t\tlabelBgStyle: {\r\n\t\t\t\theight: '24.3594', fill: 'var(--color-mud_black)', stroke: 'white', strokeWidth: '3',\r\n\t\t\t\tvisibility: (props?.edgeGripSetting ? 'visible' : 'hidden')\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\treturn newEdge;\r\n\t}\r\n\r\n\t// takes in a boardData and returns an array of nodes and edges from react flow\r\n\tfunction generateElements(bdata) {\r\n\t\tconsole.log(\"GENERATING ELEMENTS FROM\", bdata);\r\n\t\t//let bdata = props?.boardData;\r\n\t\tlet filteredItems = props?.filteredItems;\r\n\r\n\t\tlet gendElements = [];\r\n\r\n\t\t// retrieves column data FOR JUST THE FIRST BOARD\r\n\t\tvar columnData = bdata[0]['columns'];\r\n\r\n\t\t//Goes into each board element in the JSON data array\r\n\t\t//By the end of it, a complete node board will be populated with nodes and default connections\r\n\t\tbdata.forEach(function (board, bIndex) {\r\n\t\t\tif (board['name'].indexOf(\"Subitems of\") == 1) return;\r\n\r\n\t\t\t// Adds an id number & index to the group ids\r\n\t\t\tlet groupIds = {};\r\n\t\t\tlet groupIndex = {};\r\n\t\t\tlet currentGroupId = 0;\r\n\t\t\tboard['items'].forEach(function (item, itIndex) {\r\n\t\t\t\tlet groupName = item['group']['title'];\r\n\t\t\t\tif (!(groupName in groupIds)) {\r\n\t\t\t\t\tgroupIds[groupName] = currentGroupId;\r\n\t\t\t\t\tgroupIndex[groupName] = 0;\r\n\t\t\t\t\tcurrentGroupId++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t//Goes into each item element in the JSON data\r\n\t\t\tboard['items'].forEach(function (item, itIndex) {\r\n\r\n\t\t\t\tlet groupName = item['group']['title'];\r\n\t\t\t\tlet titleName = item['name'];\r\n\t\t\t\tlet nodeBackgroundColor = nodeColorOnFilter(filteredItems, item['id']);\r\n\r\n\t\t\t\t// gets status data\r\n\t\t\t\tlet statusData = statusColor(item['column_values'], columnData);\r\n\r\n\t\t\t\t// gets subitems if the item has subitems\r\n\t\t\t\t// item['column_values'][0]['text'] provides a text of the subitems\r\n\t\t\t\t// if no subitems, value will be empty string\r\n\t\t\t\tif (item['column_values'][0] != \"\") {\r\n\t\t\t\t\tlet subitems = item['column_values'][0]['text'];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// adds a node\r\n\t\t\t\tgendElements.push(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: item['id'],\r\n\t\t\t\t\t\ttype: \"prettyNode\",\r\n\t\t\t\t\t\tclassName: item['id'],\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\ttitle: titleName,\r\n\t\t\t\t\t\t\tgroup: groupName, groupColor: item['group']['color'],\r\n\t\t\t\t\t\t\tstatusData: statusData,\r\n\t\t\t\t\t\t\tcolumnValues: item['column_values'],\r\n\t\t\t\t\t\t\toutgoingNodes: [],\r\n\t\t\t\t\t\t\tisConnecting: false\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\tpadding: \"16px\",\r\n\t\t\t\t\t\t\tborderRadius: \"8px\",\r\n\t\t\t\t\t\t\tbackground: nodeBackgroundColor,\r\n\t\t\t\t\t\t\tboxShadow: \"0px 6px 20px -2px rgba(0, 0, 0, 0.2)\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: { x: 325 * groupIds[groupName] + bIndex * 1000, y: 300 * groupIndex[groupName] }\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// increments group index\r\n\t\t\t\tgroupIndex[groupName] += 1;\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t//console.log(\"ELEMENTS BEFORE LOADING SAVED DATA\", databasedElements);\r\n\r\n\t\t// updates the positions of all the ndoes from saved data\r\n\t\tgendElements = loadPositions(gendElements);\r\n\r\n\t\t// adds in connections from saved data\r\n\t\tgendElements = loadConnections(gendElements);\r\n\r\n\t\t// passes nodes info on their incoming connections\r\n\t\tgendElements = updateOutgoingNodesData(gendElements);\r\n\r\n\t\t//console.log(\"----BOARD DATA LOADED-----\");\r\n\t\t//console.log(bdata);\r\n\t\t//console.log(databasedElements);\r\n\t\t//console.log(\"----------\");\r\n\r\n\t\tconsole.log(\"GENERATED ELEMENTS\", gendElements);\r\n\t\treturn gendElements;\r\n\t}\r\n\r\n\r\n\tconst nodeTypes = {\r\n\t\tprettyNode: PrettyItemNode\r\n\t};\r\n\r\n\t// elements are set to board elements for initial state\r\n\tconst [elements, setElements] = useState([]);\r\n\r\n\t//const [databasedBoardData, setDatabasedBoardData] = useState(props?.boardData);\r\n\r\n\tfunction getDatabasedElements() {\r\n\t\t// sets/populates board elements\r\n\t\tif (props?.boardData != null) {\r\n\t\t\treturn generateElements(props?.boardData);\r\n\t\t} \r\n\t\treturn [];\r\n\t}\r\n\r\n\t// updates elements when props changes\r\n\tuseEffect(() => {\r\n\t\tsetElements(getDatabasedElements());\t\r\n\t}, [props]);\r\n\r\n\t// background settings\r\n\tvar background = <div></div>;\r\n\tif (props?.backgroundSettings !== \"none\" && props?.backgroundSettings !== null) {\r\n\t\tbackground =\r\n\t\t\t<Background\r\n\t\t\t\tvariant={props?.backgroundSettings}\r\n\t\t\t\tgap={32}\r\n\t\t\t\tsize={2}\r\n\t\t\t/>;\r\n\t}\r\n\r\n\t//#region ReactFlow Callbacks\r\n\r\n\tconst onConnect = (params) => {\r\n\t\tsetElements(function (els) {\r\n\t\t\tif (els !== null) {\r\n\t\t\t\tels = addEdge(setUpNewEdge(params.source, params.target, params.sourceHandle, params.targetHandle), els);\r\n\t\t\t}\r\n\r\n\t\t\t// update internal node data with new incoming connections\r\n\t\t\tels = updateOutgoingNodesData(els);\r\n\r\n\t\t\t//console.log(els);\r\n\t\t\tconsole.log('connected', params, 'in', els);\r\n\t\t\treturn els;\r\n\t\t});\r\n\r\n\t\t// save dat shit\r\n\t\tprops?.nodeHelper.AddConnection(params);\r\n\t};\r\n\r\n\r\n\tconst onNodeDragStop = (event, node) => {\r\n\t\t//console.log(\"onNodeDragStop nodes \", node);\r\n\t\tprops?.nodeHelper.AddPosition(node);\r\n\t\tsetElements(function (els) {\r\n\t\t\tels = loadPositions(els);\r\n\t\t\treturn els;\r\n\t\t});\r\n\t}\r\n\r\n\tconst onElementsRemove = (elementsToRemove) => {\r\n\t\t//setElements((els) => removeElements(elementsToRemove, els));\r\n\t}\r\n\r\n\t//#endregion\r\n\r\n\t//#region Menu Callbacks\r\n\r\n\t// context menu handling\r\n\tconst initialEdgeContextMenuState = {\r\n\t\tcurrEdge: null,\r\n\t\tmouseX: null,\r\n\t\tmouseY: null,\r\n\t};\r\n\r\n\tconst initialNodeContextMenuState = {\r\n\t\tcurrNode: null,\r\n\t\tmouseX: null,\r\n\t\tmouseY: null,\r\n\t};\r\n\r\n\tconst [edgeContextMenuState, setEdgeContextMenuState] = React.useState(initialEdgeContextMenuState);\r\n\tconst [nodeContextMenuState, setNodeContextMenuState] = React.useState(initialNodeContextMenuState);\r\n\r\n\t// fired when context menu opened on an edge\r\n\t// called from onContextMenu html tag on the pane\r\n\tconst onEdgeContextMenu = (event) => {\r\n\t\t// prevent default context menu from firing\r\n\t\tevent.preventDefault();\r\n\r\n\t\t//console.log(event.target);\r\n\t\t//console.log(event.target.parentNode.parentNode.firstChild);\r\n\r\n\t\t// if right clicked on an edge, activate edge menu\r\n\t\tif (event.target.className['baseVal'] == \"react-flow__edge-path\") {\r\n\t\t\tsetEdgeContextMenuState({\r\n\t\t\t\t// this currEdge is the path element\r\n\t\t\t\tcurrEdge: event.target,\r\n\t\t\t\tmouseX: event.clientX - 2,\r\n\t\t\t\tmouseY: event.clientY - 4,\r\n\t\t\t});\r\n\t\t}\r\n\t\t// if right clicked on an edge label, activate edge menu\r\n\t\telse if (event.target.className['baseVal'] == \"react-flow__edge-textbg\") {\r\n\t\t\tsetEdgeContextMenuState({\r\n\t\t\t\t// this currEdge is the path element label is on\r\n\t\t\t\tcurrEdge: event.target.parentNode.parentNode.firstChild,\r\n\t\t\t\tmouseX: event.clientX - 2,\r\n\t\t\t\tmouseY: event.clientY - 4,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// fired when context menu opened on a node\r\n\t// callback from ReactFlow\r\n\tconst onNodeContextMenu = (event, node) => {\r\n\t\t// prevent default context menu from firing\r\n\t\tevent.preventDefault();\r\n\r\n\t\t// display context menu on the right-clicked node\r\n\t\tsetNodeContextMenuState({\r\n\t\t\tcurrNode: node,\r\n\t\t\tmouseX: event.clientX - 2,\r\n\t\t\tmouseY: event.clientY - 4,\r\n\t\t});\r\n\t}\r\n\r\n\t// close the context menu when clicked away\r\n\tconst defaultClose = () => {\r\n\t\tconsole.log(\"context menu closed\");\r\n\t\tsetEdgeContextMenuState(initialEdgeContextMenuState);\r\n\t\tsetNodeContextMenuState(initialNodeContextMenuState);\r\n\t};\r\n\r\n\t// called by the node context menu\r\n\tfunction onNodeDelete() {\r\n\r\n\t\tprops?.monday.execute(\"confirm\", {\r\n\t\t\tmessage: \"Delete this item? \" +\r\n\t\t\t\t\"It will be kept in your Recycle Bin for 30 days.\",\r\n\t\t\tconfirmButton: \"Delete\",\r\n\t\t\tcancelButton: \"Cancel\",\r\n\t\t\texcludeCancelButton: false\r\n\t\t}).then((res) => {\r\n\t\t\tif (res.data[\"confirm\"] === true) {\r\n\r\n\t\t\t\t// the node we are deleting (stored in an array of size 1)\r\n\t\t\t\tlet nodeToDelete = [nodeContextMenuState['currNode']];\r\n\r\n\t\t\t\t// array to hold edges to be deleted\r\n\t\t\t\tlet edgesToDelete = [];\r\n\r\n\t\t\t\t// removes the node and attached edges\r\n\t\t\t\tsetElements(function (els) {\r\n\r\n\t\t\t\t\t//let toDelete = [nodeContextMenuState['currNode']];\r\n\t\t\t\t\tels.forEach(function (element) {\r\n\t\t\t\t\t\t// if the element is an edge\r\n\t\t\t\t\t\tif (element['type'] != 'prettyNode') {\r\n\r\n\t\t\t\t\t\t\t// add to toDelete if it is connected to currNode\r\n\t\t\t\t\t\t\tif (nodeToDelete[0]['id'] == element['source'] ||\r\n\t\t\t\t\t\t\t\tnodeToDelete[0]['id'] == element['target']) {\r\n\t\t\t\t\t\t\t\tedgesToDelete.push(element);\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t//console.log(\"DELETING NODES AND EDGES\", edgesToDelete.concat(nodeToDelete));\r\n\t\t\t\t\t// concat the two arrays into a single array for deletion\r\n\t\t\t\t\treturn removeElements(edgesToDelete.concat(nodeToDelete), els);\r\n\t\t\t\t});\r\n\t\t\t\t//console.log(\"deleted node\", nodeContextMenuState['currNode']);\r\n\r\n\t\t\t\t// close the context menu\r\n\t\t\t\tsetNodeContextMenuState(initialNodeContextMenuState);\r\n\r\n\t\t\t\t// updates database to remove the connections\r\n\t\t\t\tprops?.nodeHelper.RemoveConnections(edgesToDelete);\r\n\r\n\t\t\t\t//Mutates the monday database. (deletes the node)\r\n\t\t\t\tprops?.nodeHelper.DeleteItem(nodeContextMenuState['currNode'].id, props?.boardDataQuery);\r\n\r\n\t\t\t\t//update our boardData\r\n\t\t\t\t\r\n\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// called by the edge context menu\r\n\tfunction onEdgeDelete() {\r\n\t\t// get the edge id from the class name list of the parent\r\n\t\t// i stored the id in the class name \r\n\t\t// since it's the only place I can store data in the html of a default edge\r\n\t\tlet currEdgeId = edgeContextMenuState['currEdge'].parentNode.classList.item(2);\r\n\r\n\t\t// loop through the elements until you find an id that matches currEdgeId\r\n\t\t// this way you can remove the actual edge that is in elements (we only have the html DOM element)\r\n\t\t// for loop in order to break out as soon as edge is found\r\n\t\tlet i = 0;\r\n\t\t//console.log(\"DELETING FROM\", elements);\r\n\t\tfor (i = 0; i < elements.length; i++) {\r\n\t\t\tif (elements[i]['id'] == currEdgeId) {\r\n\r\n\t\t\t\t// if id matches, remove the edge from the database\r\n\t\t\t\tprops?.nodeHelper.RemoveConnection(elements[i]['source'], elements[i]['target'], elements[i]['sourceHandle']);\r\n\r\n\t\t\t\t// if id matches, remove the edge from elements\r\n\t\t\t\t// also update data\r\n\t\t\t\tsetElements(function (els) {\r\n\t\t\t\t\tels = removeElements([elements[i]], els);\r\n\t\t\t\t\tels = updateOutgoingNodesData(els);\r\n\t\t\t\t\treturn els;\r\n\t\t\t\t});\r\n\t\t\t\t//console.log(\"deleted edge\", elements[i]);\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// close the context menu\r\n\t\tsetEdgeContextMenuState(initialEdgeContextMenuState);\r\n\t}\r\n\r\n\t//#endregion\r\n\r\n\t//#region UI Callbacks\r\n\r\n\t// subscribes to the go to highest priority event\r\n\t/*\r\n\tuseEffect(() => {\r\n\t\tconsole.log(\"the event changed\");\r\n\t\t//setElements(boardElements);\r\n\t}, [props?.findPriorityEvent]);\r\n\t*/\r\n\r\n\tfunction GoToHighestPriority(event, element) {\r\n\t\tconsole.log(flowChartObj);\r\n\t\tvar flowChartObj = flowChart.toObject();\r\n\t\tflowChart.setTransform({ x: 100, y: 100, zoom: flowChartObj.zoom });\r\n\t}\r\n\r\n\t//#endregion\r\n\r\n\tvar flowChart =\r\n\t\t<ReactFlow\r\n\t\t\telements={elements}\r\n\t\t\tnodeTypes={nodeTypes}\r\n\r\n\t\t\tonElementClick={props?.onElementClick}\r\n\t\t\tonConnect={onConnect}\r\n\t\t\tonNodeDragStop={onNodeDragStop}\r\n\t\t\t//onElementsRemove={onElementsRemove}\r\n\t\t\tonNodeContextMenu={onNodeContextMenu}\r\n\t\t\tonContextMenu={onEdgeContextMenu}\r\n\r\n\t\t\tconnectionLineComponent={CustomConnectionLine}\r\n\t\t>\r\n\t\t\t<Controls />\r\n\t\t\t{background}\r\n\r\n\t\t\t<Menu\r\n\t\t\t\tkeepMounted\r\n\t\t\t\topen={edgeContextMenuState.mouseY !== null}\r\n\t\t\t\tonClose={defaultClose}\r\n\t\t\t\tanchorReference=\"anchorPosition\"\r\n\t\t\t\tanchorPosition={\r\n\t\t\t\t\tedgeContextMenuState.mouseY !== null && edgeContextMenuState.mouseX !== null\r\n\t\t\t\t\t\t? { top: edgeContextMenuState.mouseY, left: edgeContextMenuState.mouseX }\r\n\t\t\t\t\t\t: undefined\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t<MenuItem onClick={onEdgeDelete}>Delete Connection</MenuItem>\r\n\t\t\t</Menu>\r\n\r\n\t\t\t<Menu\r\n\t\t\t\tkeepMounted\r\n\t\t\t\topen={nodeContextMenuState.mouseY !== null}\r\n\t\t\t\tonClose={defaultClose}\r\n\t\t\t\tanchorReference=\"anchorPosition\"\r\n\t\t\t\tanchorPosition={\r\n\t\t\t\t\tnodeContextMenuState.mouseY !== null && nodeContextMenuState.mouseX !== null\r\n\t\t\t\t\t\t? { top: nodeContextMenuState.mouseY, left: nodeContextMenuState.mouseX }\r\n\t\t\t\t\t\t: undefined\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t<MenuItem onClick={onNodeDelete}>Delete Node</MenuItem>\r\n\t\t\t</Menu>\r\n\r\n\t\t</ReactFlow>;\r\n\r\n\treturn (flowChart);\r\n}\r\n\r\nexport default ReactFlowChart;","import React, { useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./App.css\";\r\nimport mondaySdk from \"monday-sdk-js\";\r\nimport Search from \"monday-ui-react-core/dist/icons/Search\";\r\n\r\nimport { ReactFlowProvider } from 'react-flow-renderer';\r\nimport { useZoomPanHelper } from 'react-flow-renderer';\r\nimport PrettyItemNode from \"./nodes/PrettyItemNode.js\";\r\nimport NodeFunctions from \"./nodes/NodeFunctions.js\";\r\nimport \"./css/node-view.css\";\r\n\r\nimport PriorityGraphs from \"./components/PriorityGraphs.js\";\r\n\r\nimport FindPriorityButton from \"./components/FindPriorityButton.js\";\r\nimport Button from \"monday-ui-react-core/dist/Button.js\";\r\nimport \"monday-ui-react-core/dist/Button.css\";\r\nimport UIOverlay from \"./components/UIOverlay\";\r\n\r\nimport ReactFlowChart from \"./ReactFlowChart.js\";\r\n\r\n\r\nconst monday = mondaySdk();\r\nconst nodeHelper = new NodeFunctions(monday);\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    // Default state\r\n    this.state = {\r\n      settings: {},\r\n      name: \"\",\r\n      chartView: 0\r\n    };\r\n  }\r\n\r\n  // use to communicate with event listeners\r\n  componentDidMount() {\r\n    monday.listen(\"settings\", res => {\r\n      this.setState({ settings: res.data });\r\n    });\r\n\r\n    monday.listen(\"context\", res => {\r\n      this.setState({ context: res.data });\r\n\r\n      // board info query\r\n      monday.api(`query ($boardIds: [Int]) \r\n      { \r\n        boards (ids:$boardIds) { \r\n          name \r\n          items { id name group {title color} column_values { title text } } \r\n          columns {\r\n            title\r\n            settings_str\r\n          }\r\n        } \r\n      }`,\r\n        { variables: { boardIds: this.state.context.boardIds } }\r\n      ).then(res => {\r\n        this.setState({ boardData: res.data });\r\n      });\r\n\r\n      console.log(this.state.context);\r\n    });\r\n\r\n    monday.listen(\"itemIds\", (res) => {\r\n      this.setState({ filteredItems: res.data });\r\n    });\r\n\r\n    monday.listen(\"events\", (res) => {\r\n      switch (res[\"type\"]) {\r\n        case \"new_items\":\r\n          alert(\"NEW ITEM BRUH\");\r\n          this.boardDataQuery();\r\n          break;\r\n        case \"change_column_value\":\r\n          this.boardDataQuery();\r\n          break;\r\n      }\r\n    });\r\n  }\r\n\r\n  boardDataQuery() {\r\n    console.log(\"APP CONTEXT\", this.state);\r\n\r\n    // board info query\r\n    monday.api(`query ($boardIds: [Int]) \r\n          { \r\n            boards (ids:$boardIds) { \r\n              name \r\n              items { id name group {title color} column_values { title text } } \r\n              columns {\r\n                title\r\n                settings_str\r\n              }\r\n            } \r\n          }`,\r\n      { variables: { boardIds: this.state.context.boardIds } }\r\n    ).then(res => {\r\n      this.setState({ boardData: res.data });\r\n    });\r\n  }\r\n\r\n  render() {\r\n\r\n    // what to do when the user clicks on an element\r\n    function onElementClick(event, element) {\r\n\r\n      // checks for ignore node click\r\n      if (event == null) { return; }\r\n      try {\r\n        console.log(JSON.stringify(event));\r\n      }\r\n      catch {\r\n        console.log(\"spaghetti code oh yeah\")\r\n        return;\r\n      }\r\n      if (nodeHelper.EventHasClass(event, \"ignore-node-on-click\")) {\r\n        console.log(\"Click detected, but ignoring.\");\r\n        return;\r\n      }\r\n\r\n      // only do node actions if it's our node\r\n      if (typeof (element) === typeof (PrettyItemNode)) {\r\n        // monday.com FUCKING SUCKS BECAUSE THEIR API IS FUCKING BROKEN SINCE AUGUST AND THIS DOESN'T FUCKING WORK\r\n        //monday.execute('openItemCard', { itemId: element[\"id\"], kind: 'columns' });\r\n\r\n        console.log('node actions happened i guess', event);\r\n\r\n        monday.execute('openItemCard', { itemId: element[\"id\"], kind: 'columns' });\r\n      }\r\n      else {\r\n        alert(\"OH\");\r\n      }\r\n    }\r\n\r\n\tvar chartViewElement = 0 == this.state.chartView ?\r\n      <ReactFlowChart\r\n        nodeHelper={nodeHelper}\r\n        monday={monday}\r\n        boardDataQuery={this.boardDataQuery.bind(this)}\r\n\r\n        boardData={this.state.boardData?.boards}\r\n        filteredItems={this.state?.filteredItems}\r\n\r\n        pathSettings={this.state.settings?.pathdisplay}\r\n        edgeGripSetting={this.state.settings?.edgeGrips}\r\n        backgroundSettings={this.state.settings?.backgroundType}\r\n\r\n        onElementClick={onElementClick}\r\n\r\n        findPriorityEvent={this.state.findPriorityEvent}\r\n      />\r\n      : <PriorityGraphs />\r\n      ;\r\n\r\n\r\n    // note: adding a background threw a shit ton of errors for some reason whoops\r\n    return (\r\n      <div\r\n        className=\"App\"\r\n        style={{\r\n          display: \"block\",\r\n          background: \"var(--color-mud_black)\",\r\n          fontFamily: \"Roboto, sans-serif\"\r\n        }}\r\n      >\r\n\r\n        <ReactFlowProvider>\r\n\r\n          {chartViewElement}\r\n          <UIOverlay>\r\n\r\n            <FindPriorityButton />\r\n            <Button\r\n              size=\"small\"\r\n              style={{ marginRight: \"8px\" }}\r\n              onClick={() => {\r\n                this.setState({chartView: this.state.chartView == 0 ? 1 : 0});\r\n                //this.render();\r\n                console.log(\"damn thing with the freaking render fernaggly\", this.state.chartView);\r\n              }}>\r\n              {this.state.chartView == 0 ? \"View Group Priorities\" : \"View With Nodes\"}\r\n            </Button>\r\n            <Button\r\n              size=\"small\" kind=\"secondary\"\r\n              style={{ marginRight: \"8px\" }}\r\n              onClick={() => {\r\n                monday.execute(\"confirm\", {\r\n                  message: \"Are you sure you want to reset the nodes? \" +\r\n                    \"You will lose all of the connections that you have made, and all of the original connections will be returned.\",\r\n                  confirmButton: \"Confirm\",\r\n                  cancelButton: \"Cancel\",\r\n                  excludeCancelButton: false\r\n                }).then((res) => {\r\n                  if (res.data[\"confirm\"] === true) {\r\n                    // do the reset here\r\n                  }\r\n                });\r\n              }}\r\n              style={{ marginRight: \"8px\" }}>\r\n              Reset\r\n            </Button>\r\n          </UIOverlay>\r\n        </ReactFlowProvider>\r\n\r\n      </div >\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}